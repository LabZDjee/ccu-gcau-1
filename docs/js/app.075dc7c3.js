(function(t){function e(e){for(var r,l,s=e[0],o=e[1],c=e[2],d=0,m=[];d<s.length;d++)l=s[d],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&m.push(n[l][0]),n[l]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);u&&u(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],r=!0,s=1;s<a.length;s++){var o=a[s];0!==n[o]&&(r=!1)}r&&(i.splice(e--,1),t=l(l.s=a[0]))}return t}var r={},n={app:0},i=[];function l(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=r,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)l.d(a,r,function(e){return t[e]}.bind(null,r));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/ccu-gcau-1/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],o=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"2dec":function(t,e,a){"use strict";a("6c37")},"4cde":function(t,e,a){"use strict";a("d937")},5006:function(t,e,a){"use strict";a("b3e6")},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"initVue",(function(){return $a}));a("cadf"),a("551c"),a("f751"),a("097d");var r=a("2b0e"),n=(a("744f"),a("6c7b"),a("7514"),a("20d6"),a("e956"),a("1c4c"),a("6762"),a("e804"),a("d04f"),a("c8ce"),a("217b"),a("7f7f"),a("f400"),a("7f25"),a("536b"),a("d9ab"),a("f9ab"),a("32d7"),a("25c9"),a("9f3c"),a("042e"),a("c7c6"),a("f4ff"),a("049f"),a("7872"),a("a69f"),a("0b21"),a("6c1a"),a("c7c62"),a("84b4"),a("c5f6"),a("2e37"),a("fca0"),a("7cdf"),a("ee1d"),a("b1b1"),a("87f3"),a("9278"),a("5df2"),a("04ff"),a("4504"),a("fee7"),a("ffc1"),a("0d6d"),a("9986"),a("8e6e"),a("25db"),a("e4f7"),a("b9a1"),a("64d5"),a("9aea"),a("06db"),a("db97"),a("66c8"),a("57f0"),a("165b"),a("456d"),a("cf6a"),a("8615"),a("df1b"),a("2397"),a("88ca"),a("ba16"),a("d185"),a("ebde"),a("2d34"),a("f6b3"),a("2251"),a("c698"),a("a19f"),a("9253"),a("9275"),a("3b2b"),a("3846"),a("4917"),a("a481"),a("28a5"),a("386d"),a("6b54"),a("4f7f"),a("8a81"),a("ac4d"),a("8449"),a("9c86"),a("fa83"),a("48c0"),a("a032"),a("aef6"),a("d263"),a("6c371"),a("9ec8"),a("5695"),a("2fdb"),a("d0b0"),a("5df3"),a("b54a"),a("f576"),a("ed50"),a("788d"),a("14b9"),a("f386"),a("f559"),a("1448"),a("673e"),a("242a"),a("23be"),a("7c0e"),a("c66f"),a("b05c"),a("34ef"),a("6aa2"),a("15ac"),a("af56"),a("b6e4"),a("9c29"),a("63d9"),a("4dda"),a("10ad"),a("c02b"),a("4795"),a("130f"),a("ac6a"),a("96cf"),a("bb71")),i=(a("da64"),a("c0a4")),l=a.n(i);r["a"].use(n["a"],{theme:{primary:l.a.purple,secondary:l.a.blue,accent:l.a.shades.black,error:l.a.red.accent3}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-content",[a("main-contents")],1)],1)},o=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{class:{"py-0":t.isScrolledDown},attrs:{"px-0":""}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",lg11:"",xl7:""}},[a("div",{ref:"header",class:{headerMargin:!t.isScrolledDown}},[a("v-toolbar",{staticClass:"lime lighten-5"},[a("v-toolbar-title",{staticClass:"headline text-uppercase"},[a("span",[t._v("CCU>GCAU")]),a("span",{staticClass:"font-weight-light"},[t._v("Config. translator")]),a("span",{staticClass:"caption text-lowercase"},[t._v(" - v"+t._s(t.applicationVersion))])])],1),a("v-container",{staticClass:"lime lighten-5",class:{hide:t.isScrolledDown},attrs:{"pa-0":""}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs2:""}},[a("v-btn",{attrs:{small:""},on:{click:function(e){return t.$refs.inputTds.click()}}},[t._v("Load")]),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputTds",attrs:{type:"file",accept:".tdsa, .tdsn, .P0, .APP"},on:{change:t.loadTds}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-btn",{attrs:{small:""},on:{click:function(e){return t.$refs.inputAgc.click()}}},[t._v("Load AGC")]),a("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputAgc",attrs:{type:"file",accept:".agc"},on:{change:t.loadAgc}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-btn",{attrs:{small:"",disabled:null===t.agcFileName},on:{click:function(e){return t.saveOutputFile()}}},[t._v("Save AGC")])],1),a("v-flex",{attrs:{xs2:""}},[a("v-btn",{attrs:{small:""},on:{click:function(e){return t.saveTdsFile()}}},[t._v("Save TDS")])],1)],1)],1)],1),a("div",{ref:"tabBar",class:{tabBarFixed:t.tabBarFixed},style:{left:t.tabBarDynamicLeftOffset+"px"}},[a("v-tabs",{on:{change:t.menuItemSelect}},[a("v-tab",[t._v("Admin")]),a("v-tab",[t._v("System")]),a("v-tab",[t._v("Battery")]),a("v-tab",[t._v("Alarms")])],1)],1),a("div",{class:{hide:!t.tabBarFixed}},[a("v-tabs",[a("v-tab"),a("v-tab"),a("v-tab")],1)],1),a("div",{ref:"contentFrame"},[a("v-tabs",{attrs:{height:"0"},model:{value:t.menuItemSelected,callback:function(e){t.menuItemSelected=e},expression:"menuItemSelected"}},[a("v-tab"),a("v-tab"),a("v-tab"),a("v-tab"),a("v-tab-item",[a("vyw-admin",{attrs:{tdsFileName:t.tdsFileName,contentsAltered:t.contentsAltered}})],1),a("v-tab-item",[a("vyw-system")],1),a("v-tab-item",[a("vyw-battery")],1),a("v-tab-item",[a("vyw-alarms")],1)],1),"development"===t.nodeEnv?a("span",[a("vyw-react-test")],1):t._e()],1)]),a("v-dialog",{attrs:{"max-width":"400"},model:{value:t.agcFileErrorDialog,callback:function(e){t.agcFileErrorDialog=e},expression:"agcFileErrorDialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("AGC File Error")]),a("v-card-text",[t._v(t._s(t.agcErrorDetails))]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{text:""},on:{click:function(e){t.agcFileErrorDialog=!1}}},[t._v("OK")]),a("v-spacer")],1)],1)],1)],1)],1)},u=[],d=a("a92a"),m=a("aeb1"),h=a.n(m),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card",[a("v-container",{attrs:{"pt-3":""}},[a("v-layout",{attrs:{"text-xs-center":"","align-content-center":"",wrap:""}},[a("v-flex",{attrs:{"px-1":""}},[a("v-container",{attrs:{"pa-0":""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{directives:[{name:"show",rawName:"v-show",value:t.tdsFileName.length>0,expression:"tdsFileName.length>0"}],attrs:{"pb-3":"","text-xs-left":"","pl-0":""}},[a("v-card",{staticClass:"black--text",attrs:{color:"blue-grey lighten-4"}},[a("v-card-text",{staticClass:"pl-2 elevation-6"},[a("span",{staticClass:"font-italic"},[t._v("Imported file:")]),t._v(" "),a("span",{staticClass:"body-2 blue-grey--text text-darken-4"},[t._v(t._s(t.tdsFileName))]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.contentsAltered,expression:"contentsAltered"}]},[t._v(" "),a("v-icon",{attrs:{small:""}},[t._v("star")]),a("v-icon",{attrs:{small:""}},[t._v("star")])],1),a("span",[t._v(t._s(t.chargerType))])])],1)],1),a("v-flex",[a("vyw-text-input",{attrs:{"data-key":"Text_Nom",label:"Name",hint:"Project manager"}})],1),a("v-flex",[a("vyw-text-input",{attrs:{"data-key":"Text_Origine",label:"Origin"}})],1),a("v-flex",[a("vyw-text-input",{attrs:{"data-key":"Text_Devis",label:"Quotation"}})],1),a("v-flex",[a("vyw-text-input",{attrs:{"data-key":"Text_Client",label:"Customer"}})],1),a("v-flex",[a("div",{staticClass:"d-flex"},[a("div",[a("vyw-switch",{attrs:{"data-key":"Check_APP",labels:["Not approved","Approved"]}})],1),a("div",[a("vyw-text-input",{attrs:{"data-key":"Edit_CONTROL",label:"Approver"}})],1)])])],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm6:"","px-1":""}},[a("v-container",{attrs:{"pa-0":""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",[a("v-flex",[a("vyw-text-input",{attrs:{"data-key":"Text_Commande",label:"Order (nameplate)"}})],1),a("v-flex",[a("vyw-text-input",{attrs:{"data-key":"Text_Projet",label:"Project"}})],1),a("v-flex",[a("vyw-text-input",{attrs:{"data-key":"Text_ClientFinal",label:"End user"}})],1),a("v-flex",[a("vyw-text-input",{attrs:{"data-key":"SystemId",label:"Identification number"}})],1),a("vyw-text-area",{attrs:{"data-key":"Edit_COMMENT",label:"Notes",hint:"project notes/comments"}})],1)],1)],1)],1)],1)],1)],1)],1)},f=[],b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-textarea",{attrs:{label:t.label,hint:t.hint,"no-resize":!0,box:""},on:{change:t.changed},model:{value:t.editedValue,callback:function(e){t.editedValue=e},expression:"editedValue"}})},v=[],y=a("bc3a"),_=a.n(y),C=a("1b3b"),g=a.n(C),N=a("2909"),L=a("53ca");function S(t,e){for(var a=0;a<e.length;a++)if(e[a]===t)return e.splice(a,1),!0;return!1}function x(t,e){var a=Math.pow(10,e);return(Math.round(a*t)/a).toString()}function T(t,e){var a="string"===typeof t?parseFloat(t):t;switch(isNaN(a)&&(a=0),Object(L["a"])(e)){case"number":a*=e;break;case"string":a*=parseFloat(e);break;case"function":a=e(a);break}return Math.round(a).toString()}function D(t,e){return"function"!==typeof e&&(e=function(t){return t}),Object(N["a"])(Array(t)).map((function(t,a){return e(a)}))}function w(t,e,a){if("number"!==typeof e||"string"!==typeof a||!1===/^[0-9A-F]+$/.test(a))return null;var r=a.length-Math.floor(e/4)-1;if(r<0||r>=a.length)return null;var n=1<<e%4,i=parseInt(a.substring(r,r+1),16)&~n;return t&&(i|=n),"".concat(a.substring(0,r)).concat(i.toString(16).toUpperCase()).concat(a.substring(r+1))}function E(t,e){t=Math.round(t),-1===e.indexOf(t)&&(e.push(t),e.sort((function(t,e){return parseInt(t,10)-parseInt(e,10)})))}function V(t){for(var e,a="",r=!1,n=0;n<t.length;n++)0===n?a=t[n].toString():t[n]===e+1?(!1===r&&(a+="~",r=!0),n===t.length-1&&(a+=t[n].toString())):r?(a+="".concat(e,";").concat(t[n]),r=!1):a+=";".concat(t[n]),e=t[n];return a}function F(){var t=new ArrayBuffer(4),e=new Float32Array(t);e[0]=1024.25;for(var a=new Uint8Array(t),r={68:3,128:2,8:1,0:0},n=new Array(4),i=0;i<4;i++)n[i]=r[a[i]];return n}var A=F();function M(t,e,a){return e>=Math.min(t,a)&&e<=Math.max(t,a)}function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.round,a=Math.sign(t);if(t=Math.abs(t),t<1)return e(t)*a;var r=Math.log10(t),n=Math.pow(10,Math.trunc(r));return e(t/n)*n*a}function I(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7.5,a=1;if("string"===typeof t&&(t=parseFloat(t)),!isNaN(t)||t>0){var r=t*e;return r<1?a:O(r,Math.ceil)}return a}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",a=new Date,r=function(t){return t.toString().padStart(2,"0")};return"".concat(a.getFullYear()).concat(t).concat(r(a.getMonth()+1)).concat(t).concat(r(a.getDate())," ").concat(r(a.getHours())).concat(e).concat(r(a.getMinutes())).concat(e).concat(r(a.getSeconds()))}var k="0.9.16",P={},H={},B={},U=new g.a,j=[],$=new r["a"]({methods:{dataChanged:function(t){this.$emit("item-should-update",t)}}}),K={languages:["English","Dutch","Spanish","Italian","Finnish","Swedish","French","German","Slovakian","USA","Norwegian","Portuguese CCU_N","Free1 CCU_N","Free2 CCU_N"],relayNumbers:D(17,(function(t){return t.toString()})),hrPeriodicTimes:["None","1","6","12"],spareInputs:["no","active low","active high"],commissioningInput:["no","active low","active high","allowed low","allowed high"],extendedLocalMenu:["don't extend","extend"],communicationType:["None","WinSparc","2-wire RTU-Modbus","NCS (ASCII-Modbus+SPG)"]},Y=!1;function G(){!1===Y&&(Object.keys(P).forEach((function(t){B[t]=null,U.addProperty(B,t);var e=P[t].SetupParam;!1===e.startsWith("x--")&&e!==t&&(U.addProperty(B,t,e),H[e]=t,j.push(e)),j.push(t)})),Y=!0)}var W={testKey:"Text_Projet",testValue:"???",hasLedBox:null,duplicatedRelays:null,earthFaultThreshold:null,shutdownThermostat:null,forcedFloatInput:null,highrateInput:null,commissioningInput:null,alarmAcknowledgmentInput:null,displayAmbientTemperature:null,displayBatteryTemperature:null,extendedLocalMenu:null,communicationType:null};function X(){function t(t,e){U["meta_".concat(t)]=e,U.$watchers["meta_".concat(t)].push(et)}t("hasLedBox","false"),t("duplicatedRelays","false"),t("earthFaultThreshold","250"),t("shutdownThermostat","false"),t("forcedFloatInput",K.spareInputs[0]),t("highrateInput",K.spareInputs[0]),t("commissioningInput",K.commissioningInput[0]),t("alarmAcknowledgmentInput",K.spareInputs[0]),t("displayAmbientTemperature","false"),t("displayBatteryTemperature","false"),t("extendedLocalMenu",K.extendedLocalMenu[0]),t("communicationType",K.communicationType[0])}var q={fullFileName:"",shortFileName:"",extension:""};function z(){function t(t){var e=parseFloat(U[t]);return isNaN(e)?0:e}var e=t("UflPerCell"),a=t("UhrPerCell"),r=t("UcommPerCell"),n=a<e||"false"===U.ManHrEnable&&"None"===U.PeriodicHr&&"false"===U.ClHrEnable&&"false"===U.MfHrEnable&&U.meta_highrateInput===K.spareInputs[0],i=r<e||"false"===U.CommEnable&&U.meta_commissioningInput===K.commissioningInput[0],l="false"===U.VoApplEnable,s="false"===U.BattTestEnable,o="false"===U.ManCurrAdjust&&"false"===U.ManVoltAdjust,c=U.meta_communicationType===K.communicationType[0];return{highrate:n,commissionning:i,vo:l,batteryTest:s,manualAdjust:o,communications:c}}function Q(){function t(t){return e.indexOf(t)>=0}var e=U.Combo_DEF_TDB.toLowerCase();return t("vo")||t("ni")||t("cd")?5:t("lead")||t("acid")?10:7.5}function J(t){if("string"===typeof t){var e=/^(.*)(\..*)$/.exec(t);null!==e?(q.fullFileName=e[0],q.shortFileName=e[1],q.extension=e[2]):(q.fullFileName=t,q.shortFileName=t,q.extension="")}return q}Object.keys(W).forEach((function(t){U.addProperty(W,t,"meta_".concat(t))})),X();var Z=/[ ]*{meta}\n((?:.|\n)*){\/meta}\n?/;function tt(){var t=U.Edit_COMMENT.match(Z);if(null!==t){var e=t[1].split("\n");e.forEach((function(t){var e=t.match(/\$(\S+)\s*=\s*'(.*)'/);null!==e&&(U["meta_".concat(e[1])]=e[2])}))}return null!==t}function et(){if("string"===typeof U.Edit_COMMENT){var t=U.Edit_COMMENT.replace(/[ ]*{meta}(.|\n)*{\/meta}\n/,""),e="\n"===t.substring(t.length-1);U.Edit_COMMENT="".concat(t).concat(e?"":"\n","{meta}\n $hasLedBox = '").concat(U.meta_hasLedBox,"'\n $duplicatedRelays = '").concat(U.meta_duplicatedRelays,"'\n $earthFaultThreshold = '").concat(U.meta_earthFaultThreshold,"'\n $shutdownThermostat = '").concat(U.meta_shutdownThermostat,"'\n $forcedFloatInput = '").concat(U.meta_forcedFloatInput,"'\n $highrateInput = '").concat(U.meta_highrateInput,"'\n $commissioningInput = '").concat(U.meta_commissioningInput,"'\n $alarmAcknowledgmentInput = '").concat(U.meta_alarmAcknowledgmentInput,"'\n $displayAmbientTemperature = '").concat(U.meta_displayAmbientTemperature,"'\n $displayBatteryTemperature = '").concat(U.meta_displayBatteryTemperature,"'\n $extendedLocalMenu = '").concat(U.meta_extendedLocalMenu,"'\n $communicationType = '").concat(U.meta_communicationType,"'\n{/meta}\n")}}var at=[];function rt(t){return["Note","SetupType","P0Type"].some((function(e){return"float"===P[t][e].toLowerCase()}))?"float":["Note","SetupType"].some((function(e){return["boolean","byte","word","dword"].some((function(a){return P[t][e].toLowerCase()===a}))}))?"integer":"non-numeric"}function nt(){et();var t="<Projet>\r\n";return at.forEach((function(e){t+="  <Objet>\r\n",t+="    <Label>".concat(e,"</Label>\r\n");var a=U[e];if(e.startsWith("Check_")&&(a="true"===a?"1":"0"),"Edit_TFB_TEMPS"===e||"Edit_TEOTDFL_TEMPS"===e)try{var r=Math.round(parseFloat(a,10)/60);a=r.toString()}catch(l){}if("float"===rt(e)){if(a=parseFloat(a),isNaN(a))a="0.0";else{var n=1e5;a=(Math.round(a*n)/n).toString()}var i=a.match(/\s*(\d*)\.(\d*)\s*/);null!==i&&(""===i[1]&&(i[1]="0"),""===i[2]&&(i[2]="0"),a="".concat(i[1],",").concat(i[2]))}a=a.replace(/\n/g,"\r\n"),t+="    <Donnee>".concat(a,"</Donnee>\r\n"),t+="  </Objet>\r\n"})),t+="</Projet>\r\n",t}function it(t){var e,a,r,n=t.toString().split("\n"),i=/<Label>(.*)<\/Label>/i,l=/<Donnee>(.*)<\/Donnee>/i,s=/<Donnee>(.*)/i,o=/(.*)<\/Donnee>/i,c=/\s*(\d*),(\d*)\s*/,u=/\s*$/,d=0===at.length;X(),n.forEach((function(t){var n=t.replace(u,""),m=n.match(i);m&&(e=m[1],d&&at.push(e),r=!1);var h=n.match(l);if(h){if(a=h[1],"Edit_TFB_TEMPS"===e||"Edit_TEOTDFL_TEMPS"===e)try{var p=60*parseInt(a,10);a=p.toString()}catch(y){}e.startsWith("Check_")&&"true"!==a&&"false"!==a&&(a="1"===a?"true":"false");var f=a.match(c);switch(rt(e)){case"float":f&&(a="".concat(f[1],".").concat(f[2]));break;case"integer":f&&(a=Math.round("".concat(f[1],".").concat(f[2])).toString());break}["Note","SetupType","P0Type"].some((function(t){return"float"===P[e][t].toLowerCase()})),U[e]=a}else{var b=n.match(s);if(b)a=b[1],r=!0;else if(r){var v=n.match(o);v?(r=!1,U[e]="".concat(a,"\n").concat(v[1])):a="".concat(a,"\n").concat(n)}}})),tt()||et()}var lt={struct:null,lines:null,error:null,refLines:null};function st(t){try{lt.lines=t.split(/\r?\n/),lt.refLines=t.split(/\r?\n/),lt.struct=Object(d["analyzeAgcFile"])(lt.lines),lt.error=null}catch(e){lt.lines=null,lt.struct=null,lt.error=e}}_.a.get("".concat("/ccu-gcau-1/","/TDSP0APPMap.tsv")).then((function(t){for(var e,a,r=t.data,n=r.split("\n"),i=n[0].replace(/\r$/,"").split("\t"),l=1;l<n.length;l++){a={};for(var s=n[l].replace(/\r$/,"").split("\t"),o=0;o<i.length;o++)a[i[o]]=s[o],"TDSTag"===i[o]&&(e=s[o]);e.length>0&&!1===e.startsWith("x--")&&(P[e]=a)}G(),$a(),_.a.get("".concat("/ccu-gcau-1/","/template.tdsa")).then((function(t){it(t.data)}))})).catch((function(t){document.getElementById("app").innerHTML="panic: cannot initialize app from definition files like TDSP0APPMap.tsv or template.tdsa",console.log(t)}));var ot={English:0,Dutch:1,Spanish:2,Italian:3,Finnish:4,Swedish:5,French:6,German:7,Slovakian:8,USA:9,Norwegian:10,Portuguese:11,"Free 1":12,"Free 2":13};function ct(t){U.Option_6_elemnt="false",U.Option_3_elemnt="false",U.Option_2_elemnt="false",U.Option_1_elemnt="true",U.NrOfCells=t,U.Edit_QDB_NDB=t,U.Option_DEF_POST="0"===U.ChrgTimerMode?"1":"0",U.Text_Projet="".concat(q.shortFileName),U.Combo_RN_UDC=U.UdcNom,U.Edit_DC_VMAXDLT=U.HC_UpperLimit,U.Edit_DC_VMINDLT=U.LC_LowerLimit,U.Combo_RN_NDP=parseFloat(U.UacNom)<280?"1":"3";var e=parseFloat(U.UflPerCell);"true"===U.VoApplEnable?U.Combo_DEF_TDB="VO":M(1.35,e,1.389)?U.Combo_DEF_TDB="Ni CD (SPH)":M(1.39,e,1.4049)?U.Combo_DEF_TDB="Ni CD (SBH-SBM)":M(1.405,e,1.4149)?U.Combo_DEF_TDB="Ni CD (SLM)":M(1.415,e,1.43)?U.Combo_DEF_TDB="Ni CD (SBL)":M(2.2,e,2.249)?U.Combo_DEF_TDB="Open lead acid":M(2.25,e,2.35)?U.Combo_DEF_TDB="Sealed lead acid":U.Combo_DEF_TDB="None",U.Edit_BattName="--",U.Edit_COMMENT="Import from ".concat(q.extension," file type"),U.Edit_ENV_TA="25",U.Edit_ENV_ALT="0","0"===U.BattCapacity&&(U.BattCapacity=I(U.IbattNom,Q()).toString())}function ut(){U.BattTestEnable="false",U.AutoTestPeriod="12",U.DischrgPercent="0",U.TestEndVoltage="0",U.EndVoltageAlarm="0"}function dt(t,e){for(var a=new ArrayBuffer(4),r=new Uint8Array(a),n=0;n<4;n++)r[A[n]]=t[e+n];var i=new Float32Array(a);return i[0]}function mt(t){_.a.get("".concat("/ccu-gcau-1/","/template.tdsa")).then((function(e){var a;it(e.data),U.BattCapacity="0";var r=new Uint8Array(t),n=600===r.length?"P0Offset":"P0V1Offset";for(var i in"P0V1Offset"===n&&ut(),P){var l=P[i],s=/^(?:(.+):(.*))|(?:.*)$/.exec(l.P0Type),o=parseInt(l[n],10);if(null!==s&&o<r.length){var c=s[void 0===s[1]?0:1],u=s[2],d=void 0===s[2]?NaN:parseInt(u,10),m=function(t){return r[t]+256*r[t+1]},h=null,p=void 0;switch(c){case"byte":h=r[o].toString();break;case"bool16":h=m(o)?"true":"false";break;case"word":h=m(o).toString();break;case"word:bf":h=m(o)&1<<d?"true":"false";break;case"dword":p="hm"===u?60*m(o)+m(o+2):m(o)+65536*m(o+2),"h:3600:s"===l.TDSUnitAndScale?p=Math.round(p/3600):"mn:60:s"===l.TDSUnitAndScale&&(p*=60),h=p.toString();break;case"float":h=dt(r,o).toString();break;case"string":h="";for(var f=0;f<d;f++){var b=r[o+f];if(!(b>0))break;h+=String.fromCharCode(b)}break}null!==h&&(":language"===l.TDSUnitAndScale&&(h=K.languages[parseInt(h,10)]),"months:periodicHighRate"===l.TDSUnitAndScale&&(h=K.hrPeriodicTimes[parseInt(h,10)]),U[l.SetupParam]=h,"NrOfCells"===l.SetupParam&&(a=h))}}ct(a)}))}function ht(t,e){var a="string"===typeof t.AppType?t.AppType.toLowerCase():null;if(null!==a){if("Boolean"===t.SetupType)return"0"===e?"false":"true";if(a.startsWith("integer")||a.startsWith("float")){var r=1;"integer:s2h"===a&&(r=1/3600);var n=parseFloat(e)*r;return isNaN(n)?e:a.startsWith("integer")?Math.round(n).toString():n.toString()}}return e}function pt(t){switch(t.toLowerCase()){default:return"None";case"1":case"one_month":return"1";case"2":case"six_months":return"6";case"3":case"one_year":return"12"}}function ft(t){switch(t.toLowerCase()){default:return"0";case"direct":case"1":return"1"}}function bt(t){_.a.get("".concat("/ccu-gcau-1/","/template.tdsa")).then((function(e){it(e.data),U.BattCapacity="0";var a="1",r=t.toString().split("\n"),n=/^\s*(\d+):\s+(.+)\s{2,}(.*)\r?$/;r.forEach((function(t,e){var r=n.exec(t);if(null!==r){var i=r[1],l=r[2].trimRight(),s=r[3];for(var o in P)if(P[o].AppNum===i){var c=P[o];switch(l.toLowerCase()){case"language":U.Language=K.languages[ot[s]];break;case"periodichr":U.PeriodicHr=pt(s);break;case"chrgtimermode":U.ChrgTimerMode=ft(s);break;case"nrofcells":a=s;case"S1_name":case"S2_name":case"S3_name":case"S4_name":U[c.SetupParam]=s.substring(0,16);break;default:U[c.SetupParam.startsWith("x--")?c.TDSTag:c.SetupParam]=ht(c,s);break}break}}})),ct(a)}))}var vt={created:function(){var t=this.reactOnNewData.bind(this);U.$watchers[this.dataKey].push(t);var e=H[this.dataKey];void 0!==e&&U.$watchers[e].push(t),this.reactOnNewData(U[this.dataKey])},beforeDestroy:function(){var t=this.reactOnNewData.bind(this),e=U.$watchers[this.dataKey];S(t,e);var a=H[this.dataKey];if(void 0!==a){var r=U.$watchers[a];S(t,r)}}},yt={created:function(){var t=this.updateMiscStuff.bind(this);this.reactSources().forEach((function(e){U.$watchers[e].push(t);var a=H[e];void 0!==a&&U.$watchers[a].push(t)})),this.updateMiscStuff()},beforeDestroy:function(){var t=this.updateMiscStuff.bind(this);this.reactSources().forEach((function(e){S(t,U.$watchers[e]);var a=H[e];void 0!==a&&S(t,U.$watchers[a])}))}},_t={methods:{defaultOnChanged:function(t){$.dataChanged(t)}}},Ct={props:{dataKey:{type:String,required:!0},label:String,hint:String,onChanged:{type:Function}},data:function(){return{editedValue:void 0}},methods:{changed:function(){var t={dataKey:this.dataKey,value:this.editedValue};"function"===typeof this.onChanged?this.onChanged(t):this.defaultOnChanged(t)},reactOnNewData:function(t){this.editedValue=t}},mixins:[vt,_t]},gt=Ct,Nt=a("2877"),Lt=a("6544"),St=a.n(Lt),xt=a("a844"),Tt=Object(Nt["a"])(gt,b,v,!1,null,"4700036a",null),Dt=Tt.exports;St()(Tt,{VTextarea:xt["a"]});var wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-text-field",{attrs:{label:t.label,box:"",suffix:t.suffix,error:t.error,"error-messages":t.errorMessages,hint:t.hint,counter:t.maxLength,maxLength:t.maxLength,mask:t.mask},on:{change:t.changed,input:t.input},model:{value:t.editedValue,callback:function(e){t.editedValue=e},expression:"editedValue"}})},Et=[],Vt={props:{dataKey:{type:String,required:!0},filter:Function,maxChars:[Number,String],mask:String,label:String,suffix:String,hint:String,onChanged:{type:Function}},data:function(){return{editedValue:void 0,lastCorrectValue:void 0,initialValue:void 0,error:!1,errorMessages:[]}},computed:{maxLength:function(){if(!isNaN(this.maxChars)){var t=Math.round(Number(this.maxChars));return t>0?t:void 0}},test:function(){return"function"===typeof this.filter?this.filter:function(){return!1}}},methods:{input:function(){var t=this.test(this.editedValue);!1===t?(this.lastCorrectValue=this.editedValue,this.error=!1,this.errorMessages=[]):(this.error=!0,this.errorMessages=[t.errorMessage])},changed:function(){var t=this.editedValue,e=this.test(t);!1!==e&&("undefined"!==typeof e.filteredValue?t=e.filteredValue:"undefined"!==typeof this.lastCorrectValue&&(t=this.initialValue),this.editedValue=t,this.input());var a={dataKey:this.dataKey,value:t};"function"===typeof this.onChanged?this.onChanged(a):this.defaultOnChanged(a)},reactOnNewData:function(t){this.initialValue=t,this.editedValue=t}},mixins:[vt,_t]},Ft=Vt,At=a("2677"),Mt=Object(Nt["a"])(Ft,wt,Et,!1,null,"0984e623",null),Ot=Mt.exports;St()(Mt,{VTextField:At["a"]});var It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-switch",{attrs:{label:t.label,box:"",hint:t.hint,color:t.colorWhenOn},on:{change:t.changed},model:{value:t.editedValue,callback:function(e){t.editedValue=e},expression:"editedValue"}})},Rt=[],kt={props:{dataKey:{type:String,required:!0},labels:{type:Array,required:!0,default:function(){return["off","on"]}},hint:String,colorWhenOn:String,onChanged:{type:Function}},data:function(){return{editedValue:void 0,externalType:"boolean"}},computed:{label:function(){return this.labels[this.editedValue?1:0]},typedValue:function(){var t=this.editedValue;switch(this.externalType){case"number":return t?1:0;case"stringLiteral":return t?"true":"false";case"stringNumeric":return t?"1":"0";default:case"boolean":return t}}},methods:{changed:function(){var t={dataKey:this.dataKey,value:this.typedValue};"function"===typeof this.onChanged?this.onChanged(t):this.defaultOnChanged(t)},reactOnNewData:function(t){switch(Object(L["a"])(t)){case"number":this.editedValue=0!==t,this.externalType="number";break;case"string":this.editedValue=-1===["false","0"].indexOf(t.toLowerCase()),this.externalType=isNaN(t)?"stringLiteral":"stringNumeric";break;case"boolean":this.editedValue=t,this.externalType="boolean";break;default:this.editedValue=!1;break}}},mixins:[vt,_t]},Pt=kt,Ht=a("b73d"),Bt=Object(Nt["a"])(Pt,It,Rt,!1,null,"3d216c73",null),Ut=Bt.exports;St()(Bt,{VSwitch:Ht["a"]});var jt={props:{tdsFileName:String,contentsAltered:Boolean},data:function(){return{chargerType:this.whatIsChargerType()}},components:{VywTextArea:Dt,VywTextInput:Ot,VywSwitch:Ut},methods:{whatIsChargerType:function(){var t=z().vo;return"".concat(U.UdcNom).concat("1"===U.Combo_RN_NDP?"SPR":"TPR").concat(U.IdcNom).concat(t?"":"-VO")},updateMiscStuff:function(){this.chargerType=this.whatIsChargerType()},reactSources:function(){return["Combo_RN_NDP","VoApplEnable","Combo_RN_UDC","UdcNom","IdcNom"]}},mixins:[yt]},$t=jt,Kt=a("b0af"),Yt=a("99d9"),Gt=a("a523"),Wt=a("0e8f"),Xt=a("132d"),qt=a("a722"),zt=Object(Nt["a"])($t,p,f,!1,null,"40584fd7",null),Qt=zt.exports;St()(zt,{VCard:Kt["a"],VCardText:Yt["b"],VContainer:Gt["a"],VFlex:Wt["a"],VIcon:Xt["a"],VLayout:qt["a"]});var Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{"pt-3":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","px-1":"","align-content-center":""}},[a("v-card",{staticClass:"mt-1"},[a("v-card-title",{staticClass:"headline"},[t._v("Environment")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Edit_ENV_TA",label:"Ambient temperature",suffix:"C",bottom:Number(-30),top:Number(60),hint:"[-30~+60]"}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Edit_ENV_ALT",label:"Altitude",suffix:"m",bottom:Number(0),top:Number(5e3),hint:"[0~5,000]"}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Label_Derating_temp",label:"Temperature derating",suffix:"%",bottom:Number(0),top:Number(50),hint:"[0~50]"}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Label_Derating_ALT",label:"Altitude derating",suffix:"%",bottom:Number(0),top:Number(50),hint:"[0~50]"}})],1)])])],1),a("v-card",{staticClass:"mt-1",class:{grey:t.commDisabled,"lighten-3":t.commDisabled}},[a("v-card-title",{staticClass:"headline"},[t._v("Communications")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",[a("vyw-integer-input",{attrs:{"data-key":"SlaveAddress",label:"Slave number",bottom:Number(1),top:Number(255),hint:"[1~255]"}})],1),a("div",[a("vyw-select-input",{attrs:{"data-key":"Baudrate",label:"Velocity (bps, ignored)","item-list":t.baudrates,hint:"bauds"}})],1)])])],1),a("v-card",{staticClass:"mt-1"},[a("v-card-title",{staticClass:"headline"},[t._v("Language")]),a("v-card-text",[a("div",{staticClass:"d-flex justify-center"},[a("div",{staticClass:"half"},[a("vyw-select-input",{attrs:{"data-key":"Language",label:"Language","item-list":t.selectChoices.languages,hint:"local language"}})],1)])])],1),a("v-card",{staticClass:"mt-1"},[a("v-card-title",{staticClass:"headline"},[t._v("Nominal settings")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"pr-1"},[a("vyw-select-input",{attrs:{"data-key":"Combo_RN_NDP",label:"Number of phases","item-list":["1","3"],hint:"phase(s)"}})],1),a("div",[a("vyw-select-input",{attrs:{"data-key":"Combo_RN_FREQ",label:"Frequency (Hz)","item-list":["50","60"],hint:"Hz"}})],1)]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"pr-1"},[a("vyw-integer-input",{attrs:{"data-key":"UacNom",label:"AC voltage",bottom:Number(1),top:Number(700),hint:"[1~700]",suffix:"Vac"}})],1),a("div",[a("vyw-integer-input",{attrs:{"data-key":"IdcNom",label:"DC current",bottom:Number(1),top:Number(9999),hint:"[1~9,999]",suffix:"Adc"}})],1)]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"pr-1"},[a("vyw-select-input",{attrs:{"data-key":"Combo_RN_UDC",label:"DC voltage","item-list":t.dcVoltages,hint:"Vdc"}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Edit_RN_CN",label:"AC inrush current",suffix:"A",bottom:Number(0),top:Number(9999),hint:"[0~9,999]"}})],1)])])],1),a("v-card",{staticClass:"mt-1"},[a("v-card-title",{staticClass:"headline"},[t._v("Shunt")]),a("v-card-text",[a("div",{staticClass:"d-flex justify-center"},[a("div",{staticClass:"half"},[a("vyw-numeric-input",{attrs:{"data-key":"RectShuntVal",label:"Rectifier shunt (@ 100 mV)",suffix:"A",bottom:Number(.5),top:Number(9999),hint:"[0.5~9,999]"}})],1)])])],1),a("v-card",{staticClass:"mt-1"},[a("v-card-title",{staticClass:"headline"},[t._v("Customer information")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Edit_DC_VMINDLT",label:"Low voltage limit",suffix:"V",bottom:Number(0),top:Number(999)}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Edit_DC_VMAXDLT",label:"High voltage limit",suffix:"V",bottom:Number(0),top:Number(999)}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Edit_DC_CURA",label:"Current when mains off",suffix:"A",bottom:Number(0),top:Number(1e3)}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Edit_DC_CURP",label:"Current when mains on",suffix:"A",bottom:Number(0),top:Number(1e3)}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Edit_DC_PDC",label:"Peak current",suffix:"A",bottom:Number(0)}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Edit_DC_DDLPDC",label:"Duration of peak current",suffix:"s",bottom:Number(0)}})],1)])])],1)],1),a("v-flex",{attrs:{xs12:"",sm6:"","px-1":"","align-content-center":""}},[a("v-card",[a("v-card-title",{staticClass:"headline blue lighten-4"},[t._v("Hardware configuration")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",[a("vyw-switch",{attrs:{"data-key":"meta_hasLedBox",labels:["No LED box","LED box"]}})],1),a("div",[a("vyw-switch",{attrs:{"data-key":"meta_duplicatedRelays",labels:["Relays not duplicated","Relays duplicated"]}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-switch",{attrs:{"data-key":"HT_Enabled",labels:["No temp. alarm (bridge thermostat, X9.5)","Temperature alarm (bridge thermostat, X9.5)"]}})],1),a("div",[a("vyw-switch",{attrs:{"data-key":"meta_shutdownThermostat",labels:["No shutdown bridge thermostat (X9.6)","Shutdown bridge thermostat (X9.6)"]}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"meta_earthFaultThreshold",label:"Earth fault threshold",suffix:"Ω/V",bottom:Number(20),top:Number(2e3),hint:"20~2,000"}})],1)]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"pr-1"},[a("vyw-select-input",{attrs:{"data-key":"meta_forcedFloatInput",label:"Forced float (X9.1)","item-list":t.selectChoices.spareInputs}})],1),a("div",[a("vyw-select-input",{attrs:{"data-key":"meta_highrateInput",label:"Highrate (X9.2)","item-list":t.selectChoices.spareInputs}})],1)]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"pr-1"},[a("vyw-select-input",{attrs:{"data-key":"meta_commissioningInput",label:"Commissioning (X9.3)","item-list":t.selectChoices.commissioningInput}})],1),a("div",[a("vyw-select-input",{attrs:{"data-key":"meta_alarmAcknowledgmentInput",label:"Alarm ack. (X9.4)","item-list":t.selectChoices.spareInputs}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-switch",{attrs:{"data-key":"meta_displayAmbientTemperature",labels:["Don't display ambiant temperature on LCD","Display ambiant temperature on LCD"]}})],1),a("div",[a("vyw-switch",{attrs:{"data-key":"meta_displayBatteryTemperature",labels:["Don't display battery temperature on LCD","Display battery temperature on LCD"]}})],1)]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"pr-1"},[a("vyw-select-input",{attrs:{"data-key":"meta_extendedLocalMenu",label:"Local menus","item-list":t.selectChoices.extendedLocalMenu}})],1),a("div",[a("vyw-select-input",{attrs:{"data-key":"meta_communicationType",label:"Communications","item-list":t.selectChoices.communicationType}})],1)])])],1),a("v-card",{staticClass:"mt-1"},[a("v-card-title",{staticClass:"headline"},[t._v("Rectifier off")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"oneThird"},[a("vyw-switch",{attrs:{"data-key":"RfShtdnEnable",labels:["Not on rectifier failure","On rectifier failure"]}})],1),a("div",{staticClass:"oneThird"},[a("vyw-switch",{attrs:{"data-key":"MfShtdnEnable",labels:["Not on mains failure","On mains failure"]}})],1),a("div",{staticClass:"oneThird"},[a("vyw-switch",{attrs:{"data-key":"HvShtdnEnable",labels:["Not on high DC voltage","On high DC voltage"]}})],1)])])],1),a("v-card",{staticClass:"mt-1"},[a("v-card-title",{staticClass:"headline"},[t._v("Meter selection")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"oneThird"},[a("vyw-switch",{attrs:{"data-key":"AcMeter",labels:["No AC meter","AC meter present"]}})],1),a("div",{staticClass:"oneThird"},[a("vyw-switch",{attrs:{"data-key":"LoadVoltMeter",labels:["No VLoad meter","VLoad meter present"]}})],1),a("div",{staticClass:"oneThird"},[a("vyw-switch",{attrs:{"data-key":"AhMeterDisplay",labels:["No Ah meter","Ah meter present"]}})],1)])])],1),a("v-card",{staticClass:"mt-1",class:{grey:t.adjustDisabled,"lighten-3":t.adjustDisabled}},[a("v-card-title",{staticClass:"headline"},[t._v("Manual adjust (power supply)")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",[a("vyw-switch",{attrs:{"data-key":"ManCurrAdjust",labels:["Variable current off","Variable current on"]}})],1),a("div",[a("vyw-switch",{attrs:{"data-key":"ManVoltAdjust",labels:["Variable voltage off","Variable voltage on"]}})],1)]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"oneThird"}),a("div",{staticClass:"oneThird"},[a("vyw-numeric-input",{attrs:{"data-key":"VoltAdjustMin",label:"Min voltage",suffix:"V",bottom:Number(0),top:Number(650),hint:"[0~650]"}})],1),a("div",{staticClass:"oneThird"},[a("vyw-numeric-input",{attrs:{"data-key":"VoltAdjustMax",label:"Max voltage",suffix:"V",bottom:Number(0),top:Number(650),hint:"[0~650]"}})],1)])])],1)],1)],1)],1)],1)},Zt=[],te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-text-field",{staticClass:"mw",attrs:{label:t.label,box:"",light:"",suffix:t.suffix,error:t.error,"error-messages":t.errorMessages,hint:t.hint},on:{change:t.changed,input:t.input},model:{value:t.editedValue,callback:function(e){t.editedValue=e},expression:"editedValue"}})},ee=[],ae={props:{dataKey:{type:String,required:!0},scale:{type:Number,default:1},bottom:[Number,String],top:[Number,String],maxPrecision:{type:Number,default:5},label:String,suffix:String,hint:String,onChanged:{type:Function}},data:function(){return{editedValue:void 0,initialValue:void 0,isNumber:!1,error:!1,errorMessages:[]}},computed:{min:function(){return isNaN(this.bottom)?void 0:Number(this.bottom)},max:function(){return isNaN(this.top)?void 0:Number(this.top)}},methods:{test:function(){var t=Number(this.editedValue);return isNaN(t)?{msg:"Not a number!",def:this.initialValue}:void 0!==this.min&&t<this.min?{msg:"Too small (minimum: ".concat(this.min,")!"),def:this.min}:void 0!==this.max&&t>this.max?{msg:"Too large (maximum: ".concat(this.max,")!"),def:this.max}:(this.initialValue=t,!1)},applyPrecision:function(t){var e=Math.round(Number(this.maxPrecision));return!isNaN(e)&&e>0?Number(t.toPrecision(this.maxPrecision)):t},input:function(){var t=this.test();!1===t?(this.error=!1,this.errorMessages=[]):(this.error=!0,this.errorMessages=[t.msg])},changed:function(){var t=this.test(),e=Number(this.editedValue);!1!==t&&(e=t.def),this.editedValue=e,this.input();var a=this.applyPrecision(e/this.scale),r={dataKey:this.dataKey,value:this.isNumber?a:a.toString()};"function"===typeof this.onChanged?this.onChanged(r):this.defaultOnChanged(r)},reactOnNewData:function(t){var e=t;this.isNumber="number"===typeof e,e=isNaN(t)?0:this.applyPrecision(Number(t)*this.scale),this.initialValue=e,this.editedValue=e}},mounted:function(){if(this.scale<=0)throw this.$destroy(),this.$el.parentNode.removeChild(this.$el),"unsupported scale: ".concat(this.scale)},mixins:[vt,_t]},re=ae,ne=(a("4cde"),Object(Nt["a"])(re,te,ee,!1,null,"bad6b2c6",null)),ie=ne.exports;St()(ne,{VTextField:At["a"]});var le=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-text-field",{staticClass:"mw",attrs:{label:t.label,box:"",suffix:t.suffix,error:t.error,"error-messages":t.errorMessages,hint:t.hint,"append-icon":t.stepperIcon},on:{change:t.changed,input:t.input,"click:append":t.stepperIconClicked},model:{value:t.editedValue,callback:function(e){t.editedValue=e},expression:"editedValue"}})},se=[],oe={props:{dataKey:{type:String,required:!0},scale:{type:Number,default:function(){return 1}},bottom:[Number,String],top:[Number,String],stepper:{type:Object,validator:function(t){return"undefined"===typeof t||"number"===typeof t.up&&"number"===typeof t.down}},label:String,suffix:String,hint:String,onChanged:{type:Function}},data:function(){return{editedValue:void 0,initialValue:void 0,isNumber:!1,error:!1,errorMessages:[]}},computed:{min:function(){return isNaN(this.bottom)?void 0:this.numToInt(Number(this.bottom))},max:function(){return isNaN(this.top)?void 0:this.numToInt(Number(this.top))},stepperInc:function(){var t=this.stepper?this.stepper.up:void 0;if(void 0!==Object(L["a"])(t)&&!isNaN(t)){var e=Math.floor(Number(t));return e>0?e:void 0}},stepperDec:function(){var t=this.stepper?this.stepper.down:void 0;if(void 0!==Object(L["a"])(t)&&!isNaN(t)){var e=Math.floor(Number(t));return e>0?e:void 0}},stepperIcon:function(){return this.stepperInc&&this.stepperDec?"unfold_more":void 0}},methods:{test:function(){var t=Number(this.editedValue);return isNaN(t)?{msg:"Not a number!",def:this.initialValue}:!1===this.isAnInt(Number(t))?{msg:"Only integer values!",def:this.numToInt(Number(t))}:void 0!==this.min&&Number(t)<this.min?{msg:"Too small (minimum: ".concat(this.min,")!"),def:this.min}:void 0!==this.max&&Number(t)>this.max?{msg:"Too large (maximum: ".concat(this.max,")!"),def:this.max}:(this.initialValue=t,!1)},input:function(){var t=this.test();!1===t?(this.error=!1,this.errorMessages=[]):(this.error=!0,this.errorMessages=[t.msg])},changed:function(){var t=this.test(),e=this.editedValue;!1!==t&&(e=t.def),this.editedValue=e,this.input();var a=e;(this.scale>=1.5||this.scale<=2/3)&&(a=Math.round(a*this.scale));var r={dataKey:this.dataKey,value:this.isNumber?a:a.toString()};"function"===typeof this.onChanged?this.onChanged(r):this.defaultOnChanged(r)},numToInt:function(t){return isNaN(t)?NaN:Math.round(t)},isAnInt:function(t){return!1===isNaN(t)&&Math.floor(t)===t},cropDown:function(t){return"number"===typeof this.min?Math.max(this.min,t):t},cropUp:function(t){return"number"===typeof this.max?Math.min(this.max,t):t},stepperIconClicked:function(t){var e=Number(this.editedValue);isNaN(e)||(t.offsetY>t.target.offsetHeight/2?e=this.cropDown(e-this.stepperDec):(e+=this.stepperInc,this.stepper.roundUp&&(e=Math.floor(e/this.stepperInc)*this.stepperInc),e=this.cropUp(e)),this.editedValue!==e&&(this.editedValue=e,this.changed()))},reactOnNewData:function(t){var e=t;this.isNumber="number"===typeof e,isNaN(t)?e="0":(e=Math.round(Number(t).toString()),(this.scale>=1.5||this.scale<=2/3)&&(e=Math.round(e/this.scale))),this.initialValue=e,this.editedValue=e}},mixins:[vt,_t],mounted:function(){if(this.scale<=0)throw this.$destroy(),this.$el.parentNode.removeChild(this.$el),"unsupported scale: ".concat(this.scale)}},ce=oe,ue=(a("eff0"),Object(Nt["a"])(ce,le,se,!1,null,"29f8263a",null)),de=ue.exports;St()(ue,{VTextField:At["a"]});var me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-select",{attrs:{label:t.label,items:t.itemList,box:"",hint:t.hint},on:{change:t.changed},model:{value:t.editedValue,callback:function(e){t.editedValue=e},expression:"editedValue"}})},he=[],pe={props:{dataKey:{type:String,required:!0},itemList:{type:Array,required:!0,validator:function(t){return t.every((function(t){return"string"===typeof t}))}},label:String,hint:String,onChanged:{type:Function}},data:function(){return{editedValue:void 0}},computed:{index:function(){return this.itemList instanceof Array?this.itemList.indexOf(this.editedValue):-1}},methods:{changed:function(){var t={dataKey:this.dataKey,value:this.editedValue,index:this.index};"function"===typeof this.onChanged?this.onChanged(t):this.defaultOnChanged(t)},reactOnNewData:function(t){if(this.itemList instanceof Array)if(this.editedValue=this.itemList[0],"number"===typeof t){var e=Math.round(t),a=Math.max(0,Math.min(e,this.itemList.length-1));this.editedValue=this.itemList[a]}else"string"===typeof t&&this.itemList.indexOf(t)>=0&&(this.editedValue=t)}},mixins:[vt,_t]},fe=pe,be=a("b56d"),ve=Object(Nt["a"])(fe,me,he,!1,null,"93ff5a0e",null),ye=ve.exports;St()(ve,{VSelect:be["a"]});var _e={components:{VywNumericInput:ie,VywIntegerInput:de,VywSelectInput:ye,VywSwitch:Ut},data:function(){return{selectChoices:K,adjustDisabled:!1,commDisabled:!1}},computed:{baudrates:function(){return["1200","2400","4800","9600","19200"]},acVoltages:function(){return["110","120","127","208","220","230","240","380","400"]},dcCurrents:function(){return["5","10","15","25","35","50","75","100"]},dcVoltages:function(){return["12","24","48","60","110","125","220"]}},methods:{updateMiscStuff:function(t,e,a){var r=z();this.adjustDisabled=r.manualAdjust,this.commDisabled=r.communications,"Combo_RN_UDC"===a&&(U.UdcNom=t),"Edit_ENV_ALT"===a&&(t=parseFloat(t),t>5e3&&(t=5e3),t=t>=1e3&&t<=5e3?.007*(t-1e3)+7:0,t=Math.round(10*t)/10,U.Label_Derating_ALT=t.toString()),"Edit_ENV_TA"===a&&(t=parseFloat(t),t>60&&(t=60),t=t>=40?1.25*(t-40):0,t=Math.round(10*t)/10,U.Label_Derating_temp=t.toString())},reactSources:function(){return["ManCurrAdjust","ManVoltAdjust","Edit_ENV_ALT","Edit_ENV_TA","meta_communicationType","Combo_RN_UDC"]}},mixins:[yt]},Ce=_e,ge=(a("5006"),a("12b2")),Ne=Object(Nt["a"])(Ce,Jt,Zt,!1,null,"af25f8c2",null),Le=Ne.exports;St()(Ne,{VCard:Kt["a"],VCardText:Yt["b"],VCardTitle:ge["a"],VContainer:Gt["a"],VFlex:Wt["a"],VLayout:qt["a"]});var Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"pt-3":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","px-1":"","align-content-center":""}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Cell arrangement")]),a("v-card-text",[a("vyw-radios",{attrs:{dataKeysAndLabels:t.elementRadioDefs}}),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-integer-input",{attrs:{"data-key":"Edit_QDB_NDB",label:"Number of blocks",bottom:Number(1),top:Number(1e3),hint:"Nb of cells = number of bloks x nb cell(s) per block"}})],1),a("div",{staticClass:"align-self-center"},[t._v(" Number of cells: "),a("vyw-read-only-text",{attrs:{"data-key":"NrOfCells"}})],1)])],1)],1),a("v-card",{staticClass:"py-1 px-2 mt-1"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"pr-2 half"},[a("vyw-default-select",{attrs:{"data-key":"Combo_DEF_TDB",label:"Battery type","item-list":t.batteryTypes}})],1),a("div",[a("vyw-text-input",{attrs:{"data-key":"Edit_BattName",label:"Battery name",maxChars:Number(16)}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"BattCapacity",label:"Battery capacity",suffix:"Ah",bottom:Number(0),top:Number(9999)}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Edit_DEF_CDCC",label:"Short circuit current",suffix:"kA"}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"UflPerCell",label:"Floating charge voltage per cell",suffix:"V/cell",bottom:Number(0),top:Number(24),hint:"[0~24]"}})],1),a("div",{staticClass:"align-self-center"},[t._v(" Total: "),a("vyw-read-only-text",{attrs:{"data-key":"Label_DEF_TDFLPETOT2"}}),t._v(" V ")],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"IbattNom",label:"Current limit",suffix:"A",bottom:Number(1),top:Number(9999),hint:"[1~9,999]"}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-switch",{attrs:{"data-key":"TempComp",labels:["No","Yes"]}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"CompPerC",label:"Temperature compensation",bottom:Number(0),top:Number(.6),suffix:"%/C"}})],1),a("div",[a("div",[a("vyw-read-only-text",{attrs:{"data-key":"Edit_DEF_CET"}}),t._v(" mV/C/Cell ")],1),a("div",[t._v(t._s(t.vPerC)+" mV/C")])])]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-switch",{attrs:{"data-key":"BattShunt",labels:["No battery shunt","Has battery shunt"]}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"BattShuntVal",label:"Shunt value @ 100 mV",suffix:"A",bottom:Number(.5),top:Number(9999),hint:"[0.5~9999]"}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"Edit_DEF_TDFDDPE",label:"Discharge end voltage / cell",bottom:Number(0),top:Number(1e3),suffix:"V"}})],1),a("div",{staticClass:"align-self-center"},[t._v(" Total: "),a("vyw-read-only-text",{attrs:{"data-key":"Label_DEF_TDFDDTOT2"}}),t._v(" V ")],1)])]),a("v-card",{staticClass:"mt-1",class:{grey:t.voDisabled,"lighten-3":t.voDisabled}},[a("v-card-title",{staticClass:"headline"},[t._v("VO settings")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"DTmin",label:"ΔΘ min",suffix:"C",bottom:Number(0),top:Number(20)}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"DTmax",label:"ΔΘ max",suffix:"C",bottom:Number(0),top:Number(20)}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"IbattLow",label:"Current limit",suffix:"A",bottom:Number(1),top:Number(9999)}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"VoChargeTime",label:"Extra time",suffix:"h",bottom:Number(0),top:Number(20)}})],1)])])],1)],1),a("v-flex",{attrs:{xs12:"",sm6:"","px-1":"","align-content-center":""}},[a("v-card",{class:{grey:t.highrateDisabled,"lighten-3":t.highrateDisabled}},[a("v-card-title",{staticClass:"headline"},[t._v("Highrate")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"UhrPerCell",label:"Highrate charge voltage / cell",suffix:"V/cell",bottom:Number(0),top:Number(24)}})],1),a("div",{staticClass:"align-self-center"},[t._v(" Total: "),a("vyw-read-only-text",{attrs:{"data-key":"Label_DEF_TDEPETOT2"}}),t._v(" V ")],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-radios",{attrs:{dataKeysAndLabels:t.hrModeRadioDefs}})],1),a("div",[a("vyw-default-select",{attrs:{"data-key":"HrRelayOutput",label:"Relay number","item-list":t.relayNumbers,hint:"0: no relay"}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-switch",{attrs:{"data-key":"ManHrEnable",labels:["Manual start disabled","Manual start enabled"]}})],1),a("div",[a("vyw-default-select",{attrs:{"data-key":"PeriodicHr","item-list":t.hrPeriodicTimes,label:"Periodic time (months)"}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-switch",{attrs:{"data-key":"ClHrEnable",labels:["No start on current limit","Starts on current limit"]}})],1),a("div",[a("vyw-integer-input",{attrs:{"data-key":"ClHrTime",label:"Delay",suffix:"s",bottom:Number(0),top:Number(255)}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-switch",{attrs:{"data-key":"MfHrEnable",labels:["No start on mains failure","Starts on mains failure"]}})],1),a("div",[a("vyw-integer-input",{attrs:{"data-key":"MfHrTime",label:"Delay",suffix:"s",bottom:Number(0),top:Number(255)}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"ChargeTime",label:"Charge time",suffix:"h",bottom:Number(0),top:Number(99)}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"BattFanDelay",label:"Fan delay",suffix:"h",bottom:Number(0),top:Number(24)}})],1)])])],1),a("v-card",{staticClass:"mt-1",class:{grey:t.commissioningDisabled,"lighten-3":t.commissioningDisabled}},[a("v-card-title",{staticClass:"headline"},[t._v("Commissioning")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",[a("vyw-switch",{attrs:{"data-key":"CommEnable",labels:["Commissioning disabled","Commissioning enabled"]}})],1),a("div",[a("vyw-default-select",{attrs:{"data-key":"CommRelayOutput",label:"Relay number","item-list":t.relayNumbers,hint:"0: no relay"}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"UcommPerCell",label:"Commissioning charge voltage / cell",suffix:"V/cell",bottom:Number(0),top:Number(24)}})],1),a("div",{staticClass:"align-self-center"},[t._v(" Total: "),a("vyw-read-only-text",{attrs:{"data-key":"Label_DEF_TDFOTOT2"}}),t._v(" V ")],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"CommCurrent",label:"Commiss. charge current",suffix:"A",bottom:Number(1),top:Number(9999)}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"CommTime",label:"Commiss. charge time",suffix:"h",bottom:Number(0),top:Number(24)}})],1)])])],1),a("v-card",{staticClass:"mt-1",class:{grey:t.battTestDisabled,"lighten-3":t.battTestDisabled}},[a("v-card-title",{staticClass:"headline"},[t._v("Battery test")]),a("v-card-text",[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"one-third"},[a("vyw-switch",{attrs:{"data-key":"BattTestEnable",labels:["Disabled","Enabled"]}})],1),a("div",{staticClass:"px-1"},[a("vyw-default-select",{attrs:{"data-key":"AutoTestPeriod",itemList:t.months,label:"Period (months)"}})],1),a("div",{staticClass:"one-third"},[a("vyw-numeric-input",{attrs:{"data-key":"DischrgPercent",label:"Discharge",suffix:"%",bottom:Number(0),top:Number(30)}})],1)]),a("div",{staticClass:"d-flex"},[a("div",[a("vyw-numeric-input",{attrs:{"data-key":"TestEndVoltage",label:"Test end voltage",suffix:"V",bottom:Number(0),top:Number(650)}})],1),a("div",[a("vyw-numeric-input",{attrs:{"data-key":"EndVoltageAlarm",label:"Discharge end voltage alarm",suffix:"V",bottom:Number(0),top:Number(650)}})],1)])])],1)],1)],1)],1)},xe=[],Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-radio-group",{attrs:{mandatory:!0,column:!1},on:{change:t.changed},model:{value:t.editedValue,callback:function(e){t.editedValue=e},expression:"editedValue"}},t._l(t.dataKeysAndLabels,(function(e){return a("v-radio",{key:e.key,attrs:{label:e.label,value:e.key,color:t.colorWhenOn}})})),1)},De=[],we={props:{dataKeysAndLabels:{type:Array,required:!0},hint:String,colorWhenOn:String,onChanged:{type:Function}},data:function(){return{editedValue:void 0,externalType:"boolean"}},methods:{typedValue:function(t){switch(this.externalType){case"number":return t?1:0;case"stringLiteral":return t?"true":"false";case"stringNumeric":return t?"1":"0";default:return t}},changed:function(){var t=this,e="function"===typeof this.onChanged?this.onChanged:this.defaultOnChanged;this.dataKeysAndLabels.forEach((function(a){var r=a.key;e({dataKey:r,value:t.typedValue(r===t.editedValue)})}))},reactOnNewData:function(t,e,a){switch(Object(L["a"])(t)){case"number":if(0===t)return;this.externalType="number";break;case"string":if("false"===t.toLowerCase()||"0"===t)return;this.externalType=isNaN(t)?"stringLiteral":"stringNumeric";break;case"boolean":if(!1===t)return;this.externalType="boolean";break;default:return}for(var r=0;r<this.dataKeysAndLabels.length;r++){var n=this.dataKeysAndLabels[r].key;if(n===a||H[n]===a||n===H[a]){this.editedValue=n;break}}}},created:function(){for(var t=this.reactOnNewData.bind(this),e=0;e<this.dataKeysAndLabels.length;e++){var a=this.dataKeysAndLabels[e].key,r=void 0===H[a]?a:H[a];U.$watchers[a].push(t),r!==a&&U.$watchers[r].push(t),this.reactOnNewData(U[this.dataKeysAndLabels[e].key])}},beforeDestroy:function(){for(var t=this.reactOnNewData.bind(this),e=0;e<this.dataKeysAndLabels.length;e++){var a=this.dataKeysAndLabels[e].key,r=void 0===H[a]?a:H[a];S(t,U.$watchers[a]),r!==a&&S(t,U.$watchers[r])}},mixins:[_t]},Ee=we,Ve=a("67b6"),Fe=a("43a6"),Ae=Object(Nt["a"])(Ee,Te,De,!1,null,"404ead38",null),Me=Ae.exports;St()(Ae,{VRadio:Ve["a"],VRadioGroup:Fe["a"]});var Oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[t._v(t._s(t.displayedValue))])},Ie=[],Re={props:{dataKey:{type:String,required:!0}},data:function(){return{displayedValue:void 0}},methods:{reactOnNewData:function(t){this.displayedValue=t}},mixins:[vt]},ke=Re,Pe=Object(Nt["a"])(ke,Oe,Ie,!1,null,"848cefac",null),He=Pe.exports,Be={data:function(){return{vPerC:null,voDisabled:!1,highrateDisabled:!1,commissioningDisabled:!1,battTestDisabled:!1}},components:{VywRadios:Me,VywIntegerInput:de,VywNumericInput:ie,VywReadOnlyText:He,VywDefaultSelect:ye,VywSwitch:Ut,VywTextInput:Ot},computed:{hrPeriodicTimes:function(){return K.hrPeriodicTimes},relayNumbers:function(){return K.relayNumbers},months:function(){return Object(N["a"])(Array(12)).map((function(t,e){return(e+1).toString()}))},elementRadioDefs:function(){return[{key:"Option_1_elemt",label:"1 cell / block"},{key:"Option_2_elemt",label:"2 cells / block"},{key:"Option_3_elemt",label:"3 cells / block"},{key:"Option_6_elemt",label:"6 cells / block"}]},hrModeRadioDefs:function(){return[{key:"ChrgTimerMode",label:"Direct"},{key:"Option_DEF_POST",label:"Post"}]},batteryTypes:function(){return["None","VO","Ni CD (SBH-SBM)","Ni CD (SBL)","Ni CD (SPH)","Ni CD (SLM)","Sealed lead acid","Open lead acid"]}},methods:{updateMiscStuff:function(t,e,a){var r=1;if("1"===U.Option_2_elemt?r=2:"1"===U.Option_3_elemt?r=3:"1"===U.Option_6_elemt&&(r=6),"Combo_DEF_TDB"===a){var n="VO"===t?"true":"false",i=n;"false"===i&&(i=U.TempComp),U.meta_displayAmbientTemperature=i,U.meta_displayBatteryTemperature=n}var l=Number(U.Edit_QDB_NDB)*r;U.NrOfCells=l.toString(),U["Label_DEF_TDFLPETOT2"]=x(Number(U.UflPerCell)*l,4),U["Label_DEF_TDFDDTOT2"]=x(Number(U["Edit_DEF_TDFDDPE"])*l,4),U["Label_DEF_TDFOTOT2"]=x(Number(U.UcommPerCell)*l,4),U["Label_DEF_TDEPETOT2"]=x(Number(U.UhrPerCell)*l,4),U["Edit_DEF_CET"]=x(Number(U.CompPerC)*Number(U.UflPerCell),4),this.vPerC=x(Number(U.CompPerC)*Number(U.UflPerCell)*l,4),t!==e&&("VoApplEnable"===a||"Frame_OPBV"===a?"true"===t?U["Combo_DEF_TDB"]="VO":"VO"===U["Combo_DEF_TDB"]&&(U["Combo_DEF_TDB"]="None"):"Combo_DEF_TDB"===a&&(U.VoApplEnable="VO"===t?"true":"false"));var s=z();this.voDisabled=s.vo,this.voDisabled&&"Check_DEF_CET"===a&&(U.meta_displayAmbientTemperature=t),this.highrateDisabled=s.highrate,this.commissioningDisabled=s.commissionning,this.battTestDisabled=s.batteryTest},reactSources:function(){return["Option_2_elemt","Option_3_elemt","Option_6_elemt","Edit_QDB_NDB","UflPerCell","Edit_DEF_TDFDDPE","UcommPerCell","UhrPerCell","CompPerC","Combo_DEF_TDB","VoApplEnable","ManHrEnable","PeriodicHr","ClHrEnable","MfHrEnable","CommEnable","BattTestEnable","TempComp","meta_highrateInput","meta_commissioningInput"]}},mixins:[yt]},Ue=Be,je=(a("2dec"),Object(Nt["a"])(Ue,Se,xe,!1,null,"80f77acc",null)),$e=je.exports;St()(je,{VCard:Kt["a"],VCardText:Yt["b"],VCardTitle:ge["a"],VContainer:Gt["a"],VFlex:Wt["a"],VLayout:qt["a"]});var Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-container",{attrs:{"pa-0":""}},[a("v-layout",{attrs:{wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-layout",{attrs:{column:""}},[a("v-flex",{attrs:{"pa-0":""}},[a("vyw-alarm",{attrs:{title:t.alarmMF.title,params:t.alarmMF.params}}),a("vyw-alarm",{attrs:{title:t.alarmHC.title,params:t.alarmHC.params}}),a("vyw-alarm",{attrs:{title:t.alarmLC.title,params:t.alarmLC.params}}),a("vyw-alarm",{attrs:{title:t.alarmHD.title,params:t.alarmHD.params}}),a("vyw-alarm",{attrs:{title:t.alarmLD.title,params:t.alarmLD.params}}),a("vyw-alarm",{attrs:{title:t.alarmRF.title,params:t.alarmRF.params}}),a("vyw-alarm",{attrs:{title:t.alarmEFP.title,params:t.alarmEFP.params}}),a("vyw-alarm",{attrs:{title:t.alarmEFM.title,params:t.alarmEFM.params}})],1)],1)],1),a("v-flex",{attrs:{xs12:"",md6:""}},[a("v-layout",[a("v-flex",[a("vyw-alarm",{attrs:{title:t.alarmS1.title,params:t.alarmS1.params}}),a("vyw-alarm",{attrs:{title:t.alarmS2.title,params:t.alarmS2.params}}),a("vyw-alarm",{attrs:{title:t.alarmS3.title,params:t.alarmS3.params}}),a("vyw-alarm",{attrs:{title:t.alarmS4.title,params:t.alarmS4.params}}),a("vyw-alarm",{attrs:{title:t.alarmHT.title,params:t.alarmHT.params}}),a("vyw-alarm",{attrs:{title:t.alarmHB.title,params:t.alarmHB.params}}),a("vyw-alarm",{attrs:{title:t.alarmHR.title,params:t.alarmHR.params}}),a("vyw-alarm",{attrs:{title:t.alarmCM.title,params:t.alarmCM.params,isCommonAlarm:!1}})],1)],1)],1)],1)],1)],1)},Ye=[],Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"ma-1"},[a("div",{staticClass:"d-flex justify-space-around"},[a("div",{staticClass:"pa-1"},[a("vyw-switch",{attrs:{colorWhenOn:"success","data-key":t.params.enabledId,labels:t.enableLabels}})],1),t.hp("delayId")?a("div",{staticClass:"pa-1",staticStyle:{"margin-left":"25%","max-width":"40%"}},[a("vyw-integer-input",{attrs:{"data-key":t.params.delayId,stepper:{down:1,up:10,roundUp:!0},bottom:0,label:"Delay",suffix:"s",hint:"positive integer value"}})],1):t._e()]),a("div",{staticClass:"d-flex"},[t.hp("relayNbId")?a("div",{staticClass:"pa-1"},[a("vyw-default-select",{attrs:{"data-key":t.params.relayNbId,label:t.relayNumberLabel,"item-list":t.selectChoices.relayNumbers,hint:"0: no relay"}})],1):t._e(),t.hp("latch.displayId")?a("div",{staticClass:"pa-1"},[a("vyw-switch",{attrs:{"data-key":t.params.latch.displayId,labels:["Display latch: OFF","Display latch: ON"]}})],1):t._e(),t.hp("latch.relayId")?a("div",{staticClass:"pa-1"},[a("vyw-switch",{attrs:{"data-key":t.params.latch.relayId,labels:["Relay latch: OFF","Relay latch: ON"]}})],1):t._e()]),t.hp("th1.id")?a("div",{staticClass:"d-flex pa-1"},[a("div",{staticClass:"pa-1"},[a("vyw-numeric-input",{attrs:{"data-key":t.params.th1.id,scale:void 0===t.params.th1.scale?void 0:Number(t.params.th1.scale),bottom:t.params.th1.min,top:t.params.th1.max,label:t.params.th1.title,suffix:t.params.th1.unit,hint:t.params.th1.hint}})],1),t.hp("th2.id")?a("div",{staticClass:"pa-1"},[a("vyw-numeric-input",{attrs:{"data-key":t.params.th2.id,scale:void 0===t.params.th2.scale?void 0:Number(t.params.th2.scale),bottom:t.params.th2.min,top:t.params.th2.max,label:t.params.th2.title,suffix:t.params.th2.unit,hint:t.params.th2.hint}})],1):t._e()]):t._e(),t.hp("text")?a("div",{staticClass:"d-flex pa-1"},[a("div",{staticClass:"pa-1"},[a("vyw-text-input",{attrs:{"data-key":t.params.text,label:"Text",hint:"16 characters, maximum",maxChars:"16"}})],1)]):t._e()])},We=[],Xe={name:"vyw-alarm",props:{title:String,params:Object,isCommonAlarm:Boolean},data:function(){return{selectChoices:K,relayNumberLabel:"Relay number"}},methods:{hp:function(t){var e=t.split("."),a=e.reduce((function(t,e){return void 0!==t&&(t=t[e]),t}),this.params);return void 0!==a},updateMiscStuff:function(t,e,a){if(a===H[this.params.relayNbId]||a===H[this.params.enabledId]){var r=parseInt(U[this.params.relayNbId],10),n="true"===U[this.params.enabledId];n&&r>8&&"true"!==U.meta_hasLedBox?U.meta_hasLedBox="true":this.relayNumberLabelUpdate()}else"meta_hasLedBox"===a&&this.relayNumberLabelUpdate()},reactSources:function(){return"string"===typeof this.params.relayNbId?[this.params.relayNbId,this.params.enabledId,"meta_hasLedBox"]:[]},relayNumberLabelUpdate:function(){var t=parseInt(U[this.params.relayNbId],10),e="true"===U.meta_hasLedBox;this.relayNumberLabel=t>8?"LED number".concat(e||"true"!==U[this.params.enabledId]?"":"‼‼‼"):e?"Relay/LED number":"Relay number"}},computed:{enableLabels:function(){return["".concat(this.title," OFF"),"".concat(this.title," ON")]}},components:{VywTextInput:Ot,VywIntegerInput:de,VywNumericInput:ie,VywSwitch:Ut,VywDefaultSelect:ye},mixins:[yt]},qe=Xe,ze=Object(Nt["a"])(qe,Ge,We,!1,null,"20a970d9",null),Qe=ze.exports;St()(ze,{VCard:Kt["a"]});var Je={components:{VywAlarm:Qe},computed:{alarmMF:function(){return{title:"Mains out-of-range",params:{enabledId:"MF_Enabled",relayNbId:"MF_RelayOutput",delayId:"MF_Delay",latch:{displayId:"MF_LcdLatch",relayId:"MF_RelayLatch"},th1:{id:"MF_LowerLimit",title:"Min voltage",unit:"Vac",hint:"threshold",min:90,max:900},th2:{id:"MF_UpperLimit",title:"Max voltage",unit:"Vac",hint:"threshold",min:90,max:900}}}},alarmHC:function(){return{title:"High charger voltage",params:{enabledId:"HC_Enabled",relayNbId:"HC_RelayOutput",delayId:"HC_Delay",latch:{displayId:"HC_LcdLatch",relayId:"HC_RelayLatch"},th1:{id:"HC_LowerLimit",title:"Floating",unit:"Vdc",hint:"threshold",min:"16",max:"900"},th2:{id:"HC_UpperLimit",title:"Highrate",unit:"Vdc",hint:"threshold",min:"16",max:"900"}}}},alarmLC:function(){return{title:"Low charger voltage",params:{enabledId:"LC_Enabled",relayNbId:"LC_RelayOutput",delayId:"LC_Delay",latch:{displayId:"LC_LcdLatch",relayId:"LC_RelayLatch"},th1:{id:"LC_LowerLimit",title:"Low level",unit:"Vdc",hint:"threshold",min:"16",max:"900"}}}},alarmHD:function(){return{title:"High DC load voltage",params:{enabledId:"HD_Enabled",relayNbId:"HD_RelayOutput",delayId:"HD_Delay",latch:{displayId:"HD_LcdLatch",relayId:"HD_RelayLatch"},th1:{id:"HD_UpperLimit",title:"High level",unit:"Vdc",hint:"threshold",min:"16",max:"900"}}}},alarmLD:function(){return{title:"Low DC load voltage",params:{enabledId:"LD_Enabled",relayNbId:"LD_RelayOutput",delayId:"LD_Delay",latch:{displayId:"LD_LcdLatch",relayId:"LD_RelayLatch"},th1:{id:"LD_LowerLimit",title:"Low level",unit:"Vdc",hint:"threshold",min:"16",max:"900"}}}},alarmRF:function(){return{title:"Rectifier failure",params:{enabledId:"RF_Enabled",relayNbId:"RF_RelayOutput",delayId:"RF_Delay",latch:{displayId:"RF_LcdLatch",relayId:"RF_RelayLatch"}}}},alarmEFP:function(){return{title:"Earth fault plus (+)",params:{enabledId:"EFP_Enabled",relayNbId:"EFP_RelayOutput",delayId:"EFP_Delay",latch:{displayId:"EFP_LcdLatch",relayId:"EFP_RelayLatch"}}}},alarmEFM:function(){return{title:"Earth fault minus (-)",params:{enabledId:"EFM_Enabled",relayNbId:"EFM_RelayOutput",delayId:"EFM_Delay",latch:{displayId:"EFM_LcdLatch",relayId:"EFM_RelayLatch"}}}},alarmS1:function(){return{title:"Spare 1 (X8.1)",params:{enabledId:"S1_Enabled",relayNbId:"S1_RelayOutput",delayId:"S1_Delay",latch:{displayId:"S1_LcdLatch",relayId:"S1_RelayLatch"},text:"S1_Text"}}},alarmS2:function(){return{title:"Spare 2 (X8.2)",params:{enabledId:"S2_Enabled",relayNbId:"S2_RelayOutput",delayId:"S2_Delay",latch:{displayId:"S2_LcdLatch",relayId:"S2_RelayLatch"},text:"S2_Text"}}},alarmS3:function(){return{title:"Spare 3 (X8.3)",params:{enabledId:"S3_Enabled",relayNbId:"S3_RelayOutput",delayId:"S3_Delay",latch:{displayId:"S3_LcdLatch",relayId:"S3_RelayLatch"},text:"S3_Text"}}},alarmS4:function(){return{title:"Spare 4 (X8.4)",params:{enabledId:"S4_Enabled",relayNbId:"S4_RelayOutput",delayId:"S4_Delay",latch:{displayId:"S4_LcdLatch",relayId:"S4_RelayLatch"},text:"S4_Text"}}},alarmHT:function(){return{title:"High temperature (X9.5)",params:{enabledId:"HT_Enabled",relayNbId:"HT_RelayOutput",delayId:"HT_Delay",latch:{displayId:"HT_LcdLatch",relayId:"HT_RelayLatch"}}}},alarmHB:function(){return{title:"High battery current",params:{enabledId:"HB_Enabled",relayNbId:"HB_RelayOutput",delayId:"HB_Delay",latch:{displayId:"HB_LcdLatch",relayId:"HB_RelayLatch"},th1:{id:"HB_UpperLimit",title:"High level",unit:"Amps",hint:"threshold",min:"0",max:"1000"}}}},alarmHR:function(){return{title:"High rectifier current",params:{enabledId:"HR_Enabled",relayNbId:"HR_RelayOutput",delayId:"HR_Delay",latch:{displayId:"HR_LcdLatch",relayId:"HR_RelayLatch"},th1:{id:"HR_UpperLimit",title:"High level",unit:"Amps",hint:"threshold",min:"0",max:"1000"}}}},alarmCM:function(){return{title:"Common alarm",params:{enabledId:"CM_Enabled",latch:{relayId:"CM_RelayLatch"}}}}}},Ze=Je,ta=Object(Nt["a"])(Ze,Ke,Ye,!1,null,"03f72636",null),ea=ta.exports;St()(ta,{VContainer:Gt["a"],VFlex:Wt["a"],VLayout:qt["a"]});var aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-content",[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{xs12:"",md8:"","pt-3":""}},[a("v-card",[a("v-container",{attrs:{"pb-0":""}},[a("v-layout",{attrs:{"justify-center":""}},[a("v-flex",{attrs:{"pt-2":""}},[a("v-chip",{attrs:{color:"red","text-color":"white"}},[t._v("Test")])],1),a("v-flex",{attrs:{xs4:"",sm4:"","px-1":""}},[a("vyw-select-input",{attrs:{"data-key":"meta_testKey",label:"data key","item-list":t.dataKeys}})],1),a("v-flex",{attrs:{xs4:""}},[a("vyw-text-input",{attrs:{"data-key":"meta_testValue",label:"data value"}})],1),a("v-flex",{attrs:{"px-1":""}},[a("v-btn",{on:{click:t.applyTest}},[t._v("Apply")])],1),a("v-flex",{attrs:{"px-1":""}},[a("v-btn",{on:{click:t.testTranslation}},[t._v("Test Translation")])],1)],1)],1)],1)],1)],1)],1)},ra=[],na=a("ade3");function ia(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function la(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ia(Object(a),!0).forEach((function(e){Object(na["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ia(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var sa=!1,oa="production",ca={languages:{English:{upload:"French",nominal:"E"},Dutch:{upload:"Dutch",nominal:"L"},Spanish:{upload:"Spanish",nominal:"L"},Italian:{upload:"Italian",nominal:"L"},Finnish:{upload:"French",nominal:"E"},Swedish:{upload:"Swedish",nominal:"L"},French:{upload:"French",nominal:"L"},German:{upload:"German",nominal:"L"},Slovakian:{upload:"French",nominal:"E"},USA:{upload:"French",nominal:"E"},Norwegian:{upload:"French",nominal:"E"},"Portuguese CCU_N":{upload:"Portuguese",nominal:"L"},"Free1 CCU_N":{upload:"French",nominal:"E"},"Free2 CCU_N":{upload:"French",nominal:"E"}},batteryType:{None:"2",VO:"3","Ni CD (SBH-SBM)":"2","Ni CD (SBL)":"2","Ni CD (SPH)":"2","Ni CD (SLM)":"2","Sealed lead acid":"0","Open lead acid":"1"}};function ua(){var t=z(),e=t.highrate;switch(U.Combo_DEF_TDB){case"None":return"";case"VO":return"VOM battery";case"Ni CD (SBH-SBM)":return"SBH (SNH) or SBM (SNM)";case"Ni CD (SBL)":return"SBL (SNL)";case"Ni CD (SPH)":return"SPH";case"Ni CD (SLM)":return"SLM";case"Sealed lead acid":return e?"Single rate charge":"Generic";case"Open lead acid":return e?"Generic":"Dual rate charge (OPZS)";default:return""}}function da(t,e,a){var r=Object(d["findInAgcFileStruct"])({object:t,attribute:e},lt.struct);if(null===r)return console.log("cannot locate ".concat(t,".").concat(e," in GCAUConfigurationData of agcFileData!")),null;var n=r.value;if(void 0!==a&&null!==a){r.value=a;var i="".concat(t,".").concat(r.readOnly?"!":"").concat(e,' = "').concat(a,'"');lt.lines[r.line-1]=i,"development"===oa&&sa&&console.log(i)}return n}function ma(t,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(d["findInAgcFileStruct"])({metaTag:t},lt.struct);if(null===r)return console.log("cannot locate $".concat(t," in GCAUConfigurationData of agcFileData!")),null;var n=r[0],i=r[r.length-1];if(void 0!==e&&null!==e){var l,s=e.split("\n").map((function(e){var a="$".concat(t,' = "').concat(e,'"');return"development"===oa&&sa&&console.log(a),a}));if(a)(l=lt.lines).splice.apply(l,[i.line,0].concat(Object(N["a"])(s))),lt.struct=Object(d["analyzeAgcFile"])(lt.lines);else n.value=e,lt.lines[n.line-1]=s[0]}return r}function ha(t){return void 0===t&&console.log("Failure in call to function zeroOne!"),"true"===t.toLowerCase()?"1":"0"}function pa(t,e,a,r){var n=da(e,a),i="true"===t;da(e,a,w(i,r,n))}var fa=[],ba=[];function va(t,e,a){if(void 0===a&&(a=["RelayNumber","NumberOfRelays","LedNumber"]),"string"===typeof e&&(e=parseInt(e,10)),e<1||e>16)return da(t,a[0],"0"),da(t,a[1],"1"),void da(t,a[2],"0");var r="true"===U.meta_hasLedBox?e:0;e>8&&(e=0),"true"===U.meta_duplicatedRelays&&e>1&&(e=2*e-1),da(t,a[0],e.toString()),e>0?(da(t,a[1],"true"===U.meta_duplicatedRelays?"2":"1"),E(e,fa),"true"===U.meta_duplicatedRelays&&E(e+1,fa)):da(t,a[1],"1"),r>0&&E(r,ba),da(t,a[2],r.toString())}function ya(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="EVT_".concat(t);for(var n in void 0===e.Function&&(e.Function="OF"),void 0===e.LCDLatch&&(e.LCDLatch="0"),void 0===e.RelayLatch&&(e.RelayLatch="0"),void 0===e.Shutdown&&(e.Shutdown="0"),void 0===e.CommonAlarm&&(e.CommonAlarm="0"),void 0===e.RelayNumber&&(e.RelayNumber="0"),e)("Text"!==n&&"LocalText"!==n||"OF"!==e.Function||!a)&&("RelayNumber"===n?va(r,"OF"===e.Function&&a?"0":e[n]):da(r,n,e[n]));a&&pa("OF"===e.Function?"false":"true","SYSVAR","EventEnable",t-1)}function _a(){if(sa=!1,fa=[],ba=[],null!==lt.struct){ma("ProjectName",U.Text_Nom),ma("Origin",U.Text_Origine),U.Text_Origine.toLowerCase().indexOf("saft power system")>=0&&ma("Origin","AEG Power Solutions"),ma("Quotation",U.Text_Devis),ma("Customer",U.Text_Client),ma("Approved",ha(U.Check_APP)),ma("ApproveName",U.Edit_CONTROL),ma("Order",U.Text_Commande);var t={object:"REGISTRY",attribute:"ProjectReference"};if(null!==Object(d["findInAgcFileStruct"])(t,lt.struct)&&da(t.object,t.attribute,U.Text_Commande.substring(0,16)),ma("Project",U.Text_Projet),ma("EndUser",U.Text_ClientFinal),ma("IDNum",U.SystemId),ma("VInterfCard","1"),0!=parseFloat(U.UacNom)){var e=parseFloat(U.Label_DEF_TDFLPETOT2)*parseFloat(U.IdcNom)/.8/.8/parseFloat(U.UacNom);e=Math.round(10*e)/10,ma("InputCurrent",e.toString())}var a=!1,r=ma("Notes");1===r.length&&0===r[0].value.trim().length&&(a=!0),ma("Notes","Translated from a CCU configuration",!a),U.Edit_COMMENT.split("\n").forEach((function(t){ma("Notes",t,!0)})),ma("AmbTemp",(Math.round(10*U.Edit_ENV_TA)/10).toString()),ma("MaxAltitude",Math.round(U.Edit_ENV_ALT).toString()),ma("DerateTemp",(-parseFloat(U.Label_Derating_temp)).toString()),ma("DerateAltitude",(-parseFloat(U.Label_Derating_ALT)).toString()),ma("Lang2Ctrl",ca.languages[U.Language].upload),da("NOMINAL","Language",ca.languages[U.Language].nominal),da("REGISTRY","LocalLanguage",ca.languages[U.Language].upload),U.meta_extendedLocalMenu!==K.extendedLocalMenu[0]&&(da("SYSVAR","MenuGroupEnable","293F"),da("SYSVAR","BatteryMenuEnable","001F"),da("SYSVAR","NominalSetMenuEnable","0067"),da("SYSVAR","MeterMenuEnable","3F"),da("SYSVAR","HighrateMenuEnable","11FF"),da("SYSVAR","CommissionMenuEnable","001F"),da("SYSVAR","ManualAdjustMenuEnable","0F"),da("SYSVAR","VOApplicationMenuEnable","7F"),da("SYSVAR","BattTestMenuEnable","03FF"),da("SYSVAR","CompensationMenuEnable","0F"),da("SYSVAR","PasswordMenuEnable","03"),da("SYSVAR","SuperUserMenus","7FFF")),pa("false","SYSVAR","MenuGroupEnable",9),da("SYSVAR","MeterEnable","02");for(var n=1;n<=32;n++)switch(n){case 23:ya(n,{Function:"AL"});break;case 24:ya(n,{Function:"AL",LCDLatch:"1"});break;case 30:ya(n,{Function:"AL",Delay:"20"});break;default:ya(n,{Function:"OF"});break}ma("Frequency",U.Combo_RN_FREQ),ma("InrushCurrent",U.Edit_RN_CN);var i=.1/parseFloat(U.RectShuntVal);da("SYSTEM","ChargerShunt",Math.round(1e6*i).toString()),da("SYSTEM","RectShuntVolt","100");var l="3"===U.Combo_RN_NDP?"TPRe":"SPRe";da("PID","Mode","3"===U.Combo_RN_NDP?"TS":"SS");var s=U.Combo_RN_UDC,o=U.IdcNom;da("NOMINAL","ChargerCurrent",T(o,10)),da("SYSTEM","VoltageInRange",s),da("SYSTEM","MaxCurrent",T(o,10));var c=1.4*parseFloat(o)*parseFloat(s);da("SYSTEM","MaxPower",T(.1*c)),da("NOMINAL","OutputPower",T(.1*c)),ma("CstmChgName","".concat(s,"V ").concat(l," ").concat(o,"A")),da("HIGHVOLT","ExternalDividers",parseInt(s,10)>=200?"1":"0"),da("HIGHVOLT","UNomDivider","200"),da("HIGHVOLT","UProtDivider","200"),da("HIGHVOLT","EFAlpha","1453"),da("HIGHVOLT","EFBeta","1219"),da("HIGHVOLT","EFGamma","884"),da("HIGHVOLT","EFR3","0"),da("HIGHVOLT","VLvdDivider","200"),da("NOMINAL","ACVolts",T(U.UacNom,10)),pa(U.AcMeter,"SYSVAR","MeterEnable",0),pa(U.AhMeterDisplay,"SYSVAR","MeterEnable",2),da("MANADJ","ManualCurrentAdjustment",ha(U.ManCurrAdjust)),da("MANADJ","ManualVoltageAdjustment",ha(U.ManVoltAdjust)),da("MANADJ","LowerLimit",T(U.VoltAdjustMin,10)),da("MANADJ","UpperLimit",T(U.VoltAdjustMax,10)),ma("VLowLimit",U.Edit_DC_VMINDLT),ma("VHighLimit",U.Edit_DC_VMAXDLT),ma("IPeak",U.Edit_DC_PDC),ma("IPeakDur",U.Edit_DC_DDLPDC),ma("ILoadMOff",U.Edit_DC_CURA),ma("ILoadMOn",U.Edit_DC_CURP),da("BATTSEL","BatteryType",ca.batteryType[U.Combo_DEF_TDB]);var u="VO"===U.Combo_DEF_TDB;ma("BattSubType",ua()),ma("BatteryName",U.Edit_BattName);var m=parseInt(U.NrOfCells,10);da("BATTSEL","NumberOfElements",U.NrOfCells),da("BATTSEL","SymmProbePosition",T(U.NrOfCells,.5)),ma("BattnBCells",U.NrOfCells);var h=parseFloat(U.BattCapacity);da("BATTSEL","Capacity",U.BattCapacity),ma("ShortCircuitCurrent",U.Edit_DEF_CDCC),da("NOMINAL","FloatVolts",T(U.UflPerCell,10*m)),da("REGCOMP","TemperatureCompensation","true"===U.TempComp?T(U.CompPerC,100):"0"),da("SYSTEM","TempCompOnBattSens","0"),pa(U.meta_displayAmbientTemperature,"SYSVAR","MeterEnable",3),pa(U.meta_displayBatteryTemperature,"SYSVAR","MeterEnable",4),pa(U.meta_displayAmbientTemperature,"SYSVAR","MeterMenuEnable",3),pa(U.meta_displayBatteryTemperature,"SYSVAR","MeterMenuEnable",4),pa("true","SYSVAR","MeterMenuEnable",5);var p=parseFloat(U.BattShuntVal),f=null;!isNaN(p)&&p>0&&"true"===U.BattShunt&&(f=.1/p),da("SYSTEM","BatteryShunt",null!==f?Math.floor(1e6*f).toString():"0"),da("SYSTEM","BattShuntVolt","100"),da("SYSTEM","InRevPol","0000"),da("NOMINAL","BatteryCurrent",T(U.IbattNom,10));var b=parseFloat(U.UhrPerCell);if((isNaN(b)||b<=0)&&(b=parseFloat(U.UflPerCell)),da("NOMINAL","HighrateVolts",T(b,10*m)),da("HIGHRATE","TimerMode","1"===U.ChrgTimerMode?"D":"P"),da("HIGHRATE","ManualHighrate",ha(U.ManHrEnable)),da("HIGHRATE","Periodic","None"===U.PeriodicHr?"0":U.PeriodicHr),va("HIGHRATE",U.HrRelayOutput,["RelayNb","NumberOfRelays","LedNb"]),da("HIGHRATE","OnCurrentLimit","true"===U.ClHrEnable?U.ClHrTime:"0"),da("HIGHRATE","OnMainsFail","true"===U.MfHrEnable?U.MfHrTime:"0"),da("HIGHRATE","OnAhDrop","0"),da("HIGHRATE","Timer",T(U.ChargeTime,60)),da("BATTSEL","FanDelay",T(U.BattFanDelay,60)),va("BATTSEL",U.HrRelayOutput,["FanRelayNb","FanNumberOfRelays","FanLedNb"]),da("VOAPPL","AmbTempTimeConstant","480"),da("VOAPPL","AhMinDetection","0"),da("VOAPPL","dTMin",T(U.DTmin)),da("VOAPPL","dTMax",T(U.DTmax)),da("VOAPPL","BattCurrentDetection",T(U.IbattLow,10)),da("VOAPPL","Timer",T(U.VoChargeTime,60)),da("VOAPPL","AhMinDetection","0"),u){var v=parseFloat(U.IbattNom);U.meta_extendedLocalMenu!==K.extendedLocalMenu[0]&&pa("true","SYSVAR","MenuGroupEnable",6);var y=3*(h/v+parseFloat(U.VoChargeTime));y>36&&(y=36),da("VOAPPL","SecurityTimer",(60*y).toString()),ma("Notes","Warning: VO security timer arbitrary set at ".concat(y," hour").concat(1!==y?"s":"","! Okay with this?"),!0)}da("COMMISS","Manual","true"===U.CommEnable?"1":"0"),va("COMMISS",U.CommRelayOutput,["RelayNb","NumberOfRelays","LedNb"]);var _=parseFloat(U.UcommPerCell);(isNaN(_)||_<=0)&&(_=parseFloat(U.UflPerCell)),da("COMMISS","Voltage",T(_,10*m)),da("COMMISS","Current",T(U.CommCurrent,10)),da("COMMISS","Duration",T(U.CommTime,60));var C="true"===U.BattTestEnable;da("BATTTEST","BatteryTestActive",C?"1":"0"),da("BATTTEST","Periodic",C?U.AutoTestPeriod:"0"),da("BATTTEST","DischargeCurrent",T(U.IbattNom,5)),da("BATTTEST","Percentage",T(U.DischrgPercent)),da("BATTTEST","EndVoltage",T(U.TestEndVoltage,10)),C&&(U.meta_extendedLocalMenu!==K.extendedLocalMenu[0]&&pa("true","SYSVAR","MenuGroupEnable",7),ma("Notes","Warning: battery test enabled! Behavior from CCU may differ. Review settings & discuss with end user.",!0));var g=ha(U.CM_Enabled),N={LCDLatch:ha(U.MF_LcdLatch),RelayLatch:ha(U.MF_RelayLatch),Shutdown:ha(U.MfShtdnEnable),CommonAlarm:g,RelayNumber:U.MF_RelayOutput,Delay:U.MF_Delay};if("true"===U.MF_Enabled){var L=la(la({},N),{},{Function:"AL"});ya(1,la(la({},L),{},{Value:T(U.MF_UpperLimit,10)})),ya(2,la(la({},L),{},{Value:T(U.MF_LowerLimit,10)}))}else{var S=la(la({},N),{},{Function:"OF"});ya(1,la(la({},S),{},{Value:T(U.MF_UpperLimit,10)})),ya(2,la(la({},S),{},{Value:T(U.MF_LowerLimit,10)}))}var x={LCDLatch:ha(U.HC_LcdLatch),RelayLatch:ha(U.HC_RelayLatch),Shutdown:ha(U.HvShtdnEnable),CommonAlarm:g,RelayNumber:U.HC_RelayOutput,Delay:U.HC_Delay,Value:T(U.HC_LowerLimit,10)};ya(4,la(la({},x),{},{Function:"true"===U.HC_Enabled?"AL":"OF"}));var D={LCDLatch:ha(U.LC_LcdLatch),RelayLatch:ha(U.LC_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.LC_RelayOutput,Delay:U.LC_Delay,Value:T(U.LC_LowerLimit,10)};ya(5,la(la({},D),{},{Function:"true"===U.LC_Enabled?"AL":"OF"}));var w={LCDLatch:ha(U.HD_LcdLatch),RelayLatch:ha(U.HD_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.HD_RelayOutput,Delay:U.HD_Delay,Value:T(U.HD_UpperLimit,10)};ya(6,la(la({},w),{},{Function:"true"===U.HD_Enabled?"AL":"OF"}));var E={LCDLatch:ha(U.LD_LcdLatch),RelayLatch:ha(U.LD_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.LD_RelayOutput,Delay:U.LD_Delay,Value:T(U.LD_LowerLimit,10)};ya(7,la(la({},E),{},{Function:"true"===U.LD_Enabled?"AL":"OF"}));var F={LCDLatch:ha(U.RF_LcdLatch),RelayLatch:ha(U.RF_RelayLatch),Shutdown:ha(U.RfShtdnEnable),CommonAlarm:g,RelayNumber:U.RF_RelayOutput,Delay:U.RF_Delay};ya(3,la(la({},F),{},{Function:"true"===U.RF_Enabled?"AL":"OF"}));var A=T(U.meta_earthFaultThreshold,parseFloat(s)/100),M={LCDLatch:ha(U.EFP_LcdLatch),RelayLatch:ha(U.EFP_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.EFP_RelayOutput,Delay:U.EFP_Delay,Value:A};ya(8,la(la({},M),{},{Function:"true"===U.EFP_Enabled?"AL":"OF"}));var O={LCDLatch:ha(U.EFM_LcdLatch),RelayLatch:ha(U.EFM_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.EFM_RelayOutput,Delay:U.EFM_Delay,Value:A};ya(9,la(la({},O),{},{Function:"true"===U.EFM_Enabled?"AL":"OF"}));var I={LCDLatch:ha(U.S1_LcdLatch),RelayLatch:ha(U.S1_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.S1_RelayOutput,Delay:U.S1_Delay,Value:"0",Text:U.S1_Text,LocalText:U.S1_Text};ya(10,la(la({},I),{},{Function:"true"===U.S1_Enabled?"AL":"OF"}));var k={LCDLatch:ha(U.S2_LcdLatch),RelayLatch:ha(U.S2_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.S2_RelayOutput,Delay:U.S2_Delay,Value:"0",Text:U.S2_Text,LocalText:U.S2_Text};ya(11,la(la({},k),{},{Function:"true"===U.S2_Enabled?"AL":"OF"}));var P={LCDLatch:ha(U.S3_LcdLatch),RelayLatch:ha(U.S3_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.S3_RelayOutput,Delay:U.S3_Delay,Value:"0",Text:U.S3_Text,LocalText:U.S3_Text};ya(12,la(la({},P),{},{Function:"true"===U.S3_Enabled?"AL":"OF"}));var H={LCDLatch:ha(U.S4_LcdLatch),RelayLatch:ha(U.S4_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.S4_RelayOutput,Delay:U.S4_Delay,Value:"0",Text:U.S4_Text,LocalText:U.S4_Text};ya(13,la(la({},H),{},{Function:"true"===U.S4_Enabled?"AL":"OF"}));var B={LCDLatch:ha(U.HT_LcdLatch),RelayLatch:ha(U.HT_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.HT_RelayOutput,Delay:U.HT_Delay};ya(22,la(la({},B),{},{Function:"true"===U.HT_Enabled?"AL":"OF"}));var j={LCDLatch:ha(U.HB_LcdLatch),RelayLatch:ha(U.HB_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.HB_RelayOutput,Delay:U.HB_Delay,Value:T(U.HB_UpperLimit,10)};ya(21,la(la({},j),{},{Function:"true"===U.HB_Enabled?"AL":"OF"}));var $={LCDLatch:ha(U.HR_LcdLatch),RelayLatch:ha(U.HR_RelayLatch),Shutdown:"0",CommonAlarm:g,RelayNumber:U.HR_RelayOutput,Delay:U.HR_Delay,Value:T(U.HR_UpperLimit,10)};switch(ya(20,la(la({},$),{},{Function:"true"===U.HR_Enabled?"AL":"OF"})),da("COMMISS","AllowedFromSpare","0"),[{cmd:"FF",select:U.meta_forcedFloatInput},{cmd:"HC",select:U.meta_highrateInput},{cmd:"CC",select:U.meta_commissioningInput},{cmd:"AA",select:U.meta_alarmAcknowledgmentInput}].forEach((function(t,e){var a,r=t.cmd,n=t.select,i="INPUT X9.".concat(e+1);"CC"===r?n!==K.commissioningInput[3]&&n!==K.commissioningInput[4]||(r="AL",i="COMMISS.",a=n===K.commissioningInput[4]?"true":"false"):a=n===K.commissioningInput[2]?"true":"false",ya(e+14,{LCDLatch:"0",RelayLatch:"0",Shutdown:"0",CommonAlarm:"0",RelayNumber:"0",Delay:"1",Text:i,LocalText:i,Function:n===K.spareInputs[0]?"OF":r},!1),pa(a,"SYSTEM","InRevPol",e+4),pa("true","SYSVAR","EventEnable",e+13),"AL"===r&&(pa("true","SYSVAR","CommissionMenuEnable",8),da("COMMISS","AllowedFromSpare","7"))})),da("SYSTEM","ShutdownInput",ha(U.meta_shutdownThermostat)),U.meta_hasLedBox&&ba.length>0?(ma("Notes","Has one LED box with LEDs: ".concat(V(ba)),!0),ma("NbLEDCards","1")):ma("NbLEDCards","0"),fa.length>0?("true"===U.meta_duplicatedRelays&&ma("Notes","Relays are duplicated (1=>1~2, 2=>3~4,... 8=>15~16)!",!0),ma("NbRelayCards",fa.some((function(t){return t>8}))?"2":"1"),ma("Notes","Used relays: ".concat(V(fa)),!0)):ma("NbRelayCards","0"),pa("true","SYSVAR","MenuGroupEnable",11),da("SYSVAR","CommunicationMenuEnable","17"),da("COMMUN","SlaveNumber",U.SlaveAddress),U.meta_communicationType){case K.communicationType[0]:pa("false","SYSVAR","MenuGroupEnable",11);break;case K.communicationType[1]:da("COMMUN","Protocol","S"),da("COMMUN","Baudrate","38400"),da("COMMUN","Hardware","2"),da("COMMUN","Format","8N1");break;case K.communicationType[2]:da("COMMUN","Protocol","RM"),da("COMMUN","Baudrate","9600"),da("COMMUN","Hardware","4"),da("COMMUN","Format","8N1");break;case K.communicationType[3]:da("COMMUN","Protocol","SAM"),da("COMMUN","Baudrate","38400"),da("COMMUN","Hardware","N"),da("COMMUN","Format","8N1");break}var Y=z();Y.highrate&&(pa("false","SYSVAR","MenuGroupEnable",3),pa("false","SYSVAR","NominalSetMenuEnable",2)),null===f&&pa("false","SYSVAR","NominalSetMenuEnable",6),Y.commissionning&&pa("false","SYSVAR","MenuGroupEnable",4),Y.vo&&pa("false","SYSVAR","MenuGroupEnable",6),Y.batteryTest&&pa("false","SYSVAR","MenuGroupEnable",7),Y.manualAdjust&&pa("false","SYSVAR","MenuGroupEnable",5);var G=Object(d["findInAgcFileStruct"])({section:"GCAUCalibrationData",object:"CALIBR"},lt.struct);if(null!==G){var W="1024";G.attributes.forEach((function(t){var e="CALIBR.".concat(t.readOnly?"!":"").concat(t.name,' = "').concat(W,'"');t.value=W,lt.lines[t.line-1]=e}))}var X=R("-",":"),q=Object(d["findInAgcFileStruct"])({section:"GCAUCalibrationData",metaTag:"Update"},lt.struct);if(null!==q&&1===q.length){var Q='$Update = "'.concat(X,'"');q[0].value=X,lt.lines[q[0].line-1]=Q}ma("Update",X)}else console.log("Attempt to call translateCcu2gcau on invalid agcFileData!")}var Ca={components:{VywTextInput:Ot,VywSelectInput:ye},data:function(){return{dataKeys:j}},methods:{applyTest:function(){U[U.meta_testKey]=U.meta_testValue,console.log("new value for ".concat(U.meta_testKey,"=> ").concat(U.meta_testValue))},dataKeySelected:function(t){U["meta_testValue"]=U[t]},testTranslation:function(){_a()}},created:function(){$.$on("item-should-update",(function(t){U[t.dataKey]!==t.value&&(U[t.dataKey]=t.value),!1===t.dataKey.startsWith("meta_")&&(U["meta_testKey"]=t.dataKey,U["meta_testValue"]=t.value)})),U.$watchers["meta_testKey"].push(this.dataKeySelected.bind(this))},beforeDestroy:function(){S(this.dataKeySelected.bind(this),U.$watchers["meta_testKey"])}},ga=Ca,Na=a("8336"),La=a("cc20"),Sa=a("549c"),xa=Object(Nt["a"])(ga,aa,ra,!1,null,"363698e6",null),Ta=xa.exports;St()(xa,{VBtn:Na["a"],VCard:Kt["a"],VChip:La["a"],VContainer:Gt["a"],VContent:Sa["a"],VFlex:Wt["a"],VLayout:qt["a"]});var Da={components:{VywAdmin:Qt,VywSystem:Le,VywBattery:$e,VywAlarms:ea,VywReactTest:Ta},data:function(){return{menuItemSelected:void 0,headerHeight:void 0,tabBarHeight:void 0,tabBarInitialLeftOffset:void 0,contentInitialLeftOffset:void 0,tabBarDynamicLeftOffset:void 0,isScrolledDown:!1,tabBarFixed:!1,tdsFileName:"",contentsAltered:!1,agcFileName:null,agcFileErrorDialog:!1,agcErrorDetails:"??",nodeEnv:"production",applicationVersion:k}},methods:{menuItemSelect:function(t){this.menuItemSelected=t},onWindowScroll:function(){var t=document.documentElement.scrollHeight,e=window.innerHeight,a=window.scrollY;this.tabBarFixed=a>this.headerHeight,t-e>this.headerHeight?this.isScrolledDown=a>2:0===a&&(this.isScrolledDown=!1)},updateTabBarPosition:function(){this.tabBarDynamicLeftOffset=this.tabBarInitialLeftOffset+this.$refs["contentFrame"].getBoundingClientRect().left-this.contentInitialLeftOffset},loadTds:function(t){var e=this,a=t.target.files[0];if(a){var r=new FileReader,n=/.P0$/i.test(a.name),i=/.APP$/i.test(a.name);n?r.readAsArrayBuffer(a):r.readAsText(a),r.onload=function(t){var r=t.target.result;e.tdsFileName=a.name,J(a.name),n?mt(r):i?bt(r):it(r),e.contentsAltered=!1,e.$refs.inputTds.value=null}}},loadAgc:function(t){var e=this,a=t.target.files[0];if(a){var r=new FileReader;r.readAsText(a),r.onload=function(t){var r=t.target.result;st(r),null===lt.lines?(e.agcFileErrorDialog=!0,e.agcFileName=null,lt.error.explicit?e.agcErrorDetails="Error at line ".concat(lt.error.line,": ").concat(lt.error.explicit):e.agcErrorDetails="Unexpected error: ".concat(lt.error)):e.agcFileName=a.name,e.$refs.inputAgc.value=null}}},saveOutputFile:function(){var t=J(null),e="true"===U.Check_APP?"_APP.agc":"_NAP.agc",a=t.shortFileName.length?"".concat(t.shortFileName).concat(e):this.agcFileName;_a();var r=lt.lines.reduce((function(t,e){return t+"".concat(e,"\r\n")}),"");h()(r,a,"text/plain"),lt.lines=lt.refLines.map((function(t){return t})),lt.struct=Object(d["analyzeAgcFile"])(lt.lines)},saveTdsFile:function(){var t=J(null),e=nt(),a=t.shortFileName.length?t.shortFileName:"unknown",r="true"===U.Check_APP?"tdsa":"tdsn";h()(e,"".concat(a,".").concat(r),"text/plain"),this.contentsAltered=!1}},created:function(){var t=this;$.$on("item-should-update",(function(e){var a=void 0===H[e.dataKey]?e.dataKey:H[e.dataKey],r=!1===a.startsWith("meta_");U[a]!==e.value&&(U[a]=e.value,r&&(t.contentsAltered=!0)),r&&(U["meta_testKey"]=e.dataKey,U["meta_testValue"]=e.value)}))},mounted:function(){this.headerHeight=this.$refs["header"].offsetHeight,this.tabBarHeight=this.$refs["tabBar"].offsetHeight,this.tabBarInitialLeftOffset=this.$refs["tabBar"].getBoundingClientRect().left,this.tabBarDynamicLeftOffset=this.tabBarInitialLeftOffset,this.contentInitialLeftOffset=this.$refs["contentFrame"].getBoundingClientRect().left,this.updateTabBarPosition(),window.addEventListener("scroll",this.onWindowScroll),window.addEventListener("resize",this.updateTabBarPosition)},destroyed:function(){window.removeEventListener("scroll",this.onWindowScroll),window.removeEventListener("resize",this.updateTabBarPosition)}},wa=Da,Ea=(a("df76"),a("169a")),Va=a("9910"),Fa=a("71a3"),Aa=a("c671"),Ma=a("fe57"),Oa=a("71d9"),Ia=a("2a7f"),Ra=Object(Nt["a"])(wa,c,u,!1,null,"8fcaaf50",null),ka=Ra.exports;St()(Ra,{VBtn:Na["a"],VCard:Kt["a"],VCardActions:Yt["a"],VCardText:Yt["b"],VCardTitle:ge["a"],VContainer:Gt["a"],VDialog:Ea["a"],VFlex:Wt["a"],VLayout:qt["a"],VSpacer:Va["a"],VTab:Fa["a"],VTabItem:Aa["a"],VTabs:Ma["a"],VToolbar:Oa["a"],VToolbarTitle:Ia["a"]});var Pa={name:"App",components:{mainContents:ka}},Ha=Pa,Ba=a("7496"),Ua=Object(Nt["a"])(Ha,s,o,!1,null,"9eceb3aa",null),ja=Ua.exports;function $a(){new r["a"]({render:function(t){return t(ja)}}).$mount("#app")}St()(Ua,{VApp:Ba["a"],VContent:Sa["a"]}),r["a"].config.productionTip=!1},"6c37":function(t,e,a){},b3e6:function(t,e,a){},d84f:function(t,e,a){},d937:function(t,e,a){},df76:function(t,e,a){"use strict";a("ffb1")},eff0:function(t,e,a){"use strict";a("d84f")},ffb1:function(t,e,a){}});